{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/common/ci.utils.js","webpack:///./src/blur-hash/index.js","webpack:///./src/blur-hash/ci.service.js","webpack:///./src/blur-hash/ci.utils.js","webpack:///./src/blur-hash/blurHash/index.js","webpack:///./src/blur-hash/blurHash/decode.js","webpack:///./src/blur-hash/blurHash/base83.js","webpack:///./src/blur-hash/blurHash/utils.js","webpack:///./src/blur-hash/blurHash/error.js","webpack:///./src/blur-hash/blurHash/imageDataPolyfill.js","webpack:///./node_modules/throttle-debounce/dist/index.esm.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","checkIfRelativeUrlPath","src","indexOf","window","location","protocol","extractBaseURLFromString","pathArray","arguments","length","undefined","split","relativeToAbsolutePath","base","relative","isRoot","stack","origin","document","baseURI","getBaseURL","parts","pop","shift","push","join","updateSizeWithPixelRatio","size","devicePixelRatio","splittedSizes","toString","result","forEach","Math","floor","toFixed","generateUrl","props","params","config","width","height","token","domain","doNotReplaceURL","includes","getQueryString","getPreviewSRC","_ref","previewQualityFactor","previewParams","ci_info","lowQualitySize","getLowQualitySize","_props$params","_getParamsExceptSizeR","getParamsExceptSizeRelated","_getParamsExceptSizeR2","_slicedToArray","restParams","_getParamsExceptSizeR3","widthFromParam","heightFromParam","widthQ","heightQ","restParamsQ","keys","map","encodeURIComponent","w","h","_objectWithoutProperties","factor","getAdaptiveSize","sizes","presets","resultSizes","media","normalizeSize","_params$w","_params$h","_params$r","percent","parseFloat","innerWidth","innerHeight","getSizeLimit","exactSize","ceil","getCommonImageProps","image","getSize","attr","getParams","imageNodeRatio","blurHash","isLazyCanceled","preserveSize","imageNodeWidth","imageNodeHeight","resultParams","temp","replace","matchedStr","substring","JSON","parse","e","decodeURI","getURLWithoutQueryParams","url","getParamsFromURL","queryIndex","slice","element","attribute","getAttribute","addClass","isOldBrowsers","isBlurHash","support","ImageData","Uint8ClampedArray","Element","elem","className","removeClass","RegExp","DEVICE_PIXEL_RATIO_LIST","isImageSVG","toLowerCase","getRatio","determineContainerProps","imgNode","getWidth","getHeight","ratio","_ref2","_props$imgNode","_props$exactSize","_props$imageNodeWidth","_props$params2","_props$config","crop","isCrop","func","sizeParamsWidth","paramsWidth","imageNodeWidthPX","convertToPX","imageContainerWidth","getImageContainerWidth","_props$imgNode2","_props$config2","_props$exactSize2","_props$imageNodeHeigh","_props$params3","sizeParamsHeight","paramsRatio","paramsHeight","imageNodeHeightPX","imageContainerHeight","getImageContainerHeight","img","imageStyleHeight","style","imageHeight","parseInt","getParentContainerSize","imageStyleWidth","imageWidth","type","parentNode","getBoundingClientRect","leftPadding","getComputedStyle","paddingLeft","rightPadding","paddingRight","isApplyLowQualityPreview","isAdaptive","isSVG","setSrc","propertyName","lazy","imgSrc","dataSrcAttr","setAttribute","setSrcset","urls","_ref3","dpr","setBackgroundSrc","resultLink","backgroundImage","getImgSrc","baseURL","isRelativeURLPath","getBreakPoint","concat","_toConsumableArray","reverse","find","item","matchMedia","matches","filterImages","images","filtered","getImageProps","alignment","imageNodeSRC","_extends","getBackgroundImageProps","getInitialConfigLowPreview","_config$token","_config$domain","_config$lazyLoading","lazyLoading","_config$imgLoadingAni","imgLoadingAnimation","_config$width","_config$height","_config$placeholderBa","placeholderBackground","baseUrl","_config$params","_config$init","init","_config$exactSize","_config$doNotReplaceU","xs","sm","md","lg","xl","devicePixelRatioList","getInitialConfigBlurHash","_config$token3","_config$domain3","_config$lazyLoading3","_config$placeholderBa2","_config$params3","_config$init3","_config$exactSize3","_config$doNotReplaceU3","getInitialConfigPlain","_config$token2","_config$domain2","_config$lazyLoading2","_config$width2","_config$height2","_config$params2","_config$init2","_config$exactSize2","_config$doNotReplaceU2","finishAnimation","isBackground","canvas","opacity","setTimeout","removeProperty","filter","transform","getWrapper","setWrapperAlignment","wrapper","margin","isLazy","isUpdate","_ci","CIResponsive","_ci2","_throttleDebounce","_classCallCheck","this","_initialiseProps","addEventListener","loadBackgroundImage","debounce","onUpdateDimensions","process","_this","backgroundImages","windowScreenBecomesBigger","querySelectorAll","getBasicInfo","containerProps","imgProps","cloudimageUrl","cloudimageSrcset","applyOrUpdateWrapper","initImageClasses","initImageStyles","applyOrUpdateBlurHashCanvas","onload","onImageLoad","initImageBackgroundClasses","initImageBackgroundStyles","tempImage","Image","isImage","_this2","_getImgSrc","_getImgSrc2","generateURLbyDPR","processImage","processBackgroundImage","_blurHash","wrapImage","event","bgContainer","target","bg","ciBlurHash","optimizedImage","bgCanvas","querySelector","removeAttribute","createElement","background","display","overflow","position","paddingBottom","nextSibling","insertBefore","appendChild","padding","top","left","transition","pixels","decode","ctx","getContext","imageData","getImageData","data","set","putImageData","bottom","right","zIndex","prepend","default","isBlurhashValid","_base","_utils","_error","validateBlurhash","blurhash","ValidationError","sizeFlag","decode83","numY","numX","decodeDC","error","errorReason","message","intR","intG","intB","sRGBToLinear","decodeAC","maximumValue","quantR","quantG","quantB","signPow","punch","colors","Array","bytesPerRow","y","x","g","b","j","basis","cos","PI","color","linearTosRGB","digitCharacters","str","encode83","digit","pow","v","max","min","round","sign","val","exp","abs","_possibleConstructorReturn","__proto__","getPrototypeOf","Error","CanvasPixelArray","arr","args","TypeError","createImageData","throttle","delay","noTrailing","callback","debounceMode","timeoutID","cancelled","lastExec","clearExistingTimeout","clearTimeout","self","elapsed","Date","now","exec","apply","cancel","atBegin","__webpack_exports__"],"mappings":"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","file":"js-cloudimage-responsive.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","const checkIfRelativeUrlPath = src => {\n  if (!src) return false;\n\n  if (src.indexOf('//') === 0) {\n    src = window.location.protocol + src;\n  }\n\n  return (src.indexOf('http://') !== 0 && src.indexOf('https://') !== 0 && src.indexOf('//') !== 0);\n};\n\nconst getImgSrc = (src, baseURL = '') => {\n  const isRelativeURLPath = checkIfRelativeUrlPath(src);\n\n  if (src.indexOf('//') === 0) {\n    src = window.location.protocol + src;\n  }\n\n  if (isRelativeURLPath) {\n    src = relativeToAbsolutePath(baseURL, src);\n  }\n\n  return [src, isImageSVG(src)];\n};\n\nconst getBaseURL = (isRoot, base) => {\n  if (isRoot) {\n    return (base ? extractBaseURLFromString(base) : window.location.origin) + '/';\n  } else {\n    return base ? base : document.baseURI;\n  }\n}\n\nconst extractBaseURLFromString = (path = '') => {\n  const pathArray = path.split('/');\n  const protocol = pathArray[0];\n  const host = pathArray[2];\n\n  return protocol + '//' + host;\n}\n\nconst relativeToAbsolutePath = (base, relative) => {\n  const isRoot = relative[0] === '/';\n  const resultBaseURL = getBaseURL(isRoot, base);\n  const stack = resultBaseURL.split(\"/\");\n  const parts = relative.split(\"/\");\n\n  stack.pop(); // remove current file name (or empty string)\n               // (omit if \"base\" is the current folder without trailing slash)\n  if (isRoot) {\n    parts.shift();\n  }\n\n  for (let i = 0; i < parts.length; i++) {\n    if (parts[i] === \".\")\n      continue;\n    if (parts[i] === \"..\")\n      stack.pop();\n    else\n      stack.push(parts[i]);\n  }\n\n  return stack.join(\"/\");\n}\n\n/*\n* possible size values: 200 | 200x400\n* */\nexport const updateSizeWithPixelRatio = (size, devicePixelRatio) => {\n  const splittedSizes = size.toString().split('x');\n  const result = [];\n\n  [].forEach.call(splittedSizes, size => {\n    size ? result.push(Math.floor(size * ((devicePixelRatio || window.devicePixelRatio).toFixed(1) || 1))) : '';\n  });\n\n  return result.join('x');\n};\n\nconst generateUrl = props => {\n  const { src, params, config, width, height, devicePixelRatio } = props;\n  const { token, domain, doNotReplaceURL } = config;\n\n  return [\n    doNotReplaceURL ? '' : `https://${token}.${domain}/v7/`,\n    src,\n    src.includes('?') ? '&' : '?',\n    getQueryString({ params: { ...config.params, ...params }, width, height, devicePixelRatio })\n  ].join('');\n};\n\nexport const getPreviewSRC = ({ config, width, height, params, src, devicePixelRatio }) => {\n  const { previewQualityFactor } = config;\n  const previewParams = { ...params, ci_info: '' };\n  const lowQualitySize = getLowQualitySize({ width, height }, previewQualityFactor);\n\n  return generateUrl({ src, config, params: { ...previewParams, ...lowQualitySize }, devicePixelRatio });\n};\n\nconst getQueryString = props => {\n  const {\n    params = {},\n    width,\n    height,\n    devicePixelRatio\n  } = props;\n  const [restParams, widthFromParam = null, heightFromParam] = getParamsExceptSizeRelated(params);\n  const widthQ = width ? updateSizeWithPixelRatio(width, devicePixelRatio) : widthFromParam;\n  const heightQ = height ? updateSizeWithPixelRatio(height, devicePixelRatio) : heightFromParam;\n  const restParamsQ = Object\n    .keys(restParams)\n    .map((key) => encodeURIComponent(key) + \"=\" + encodeURIComponent(restParams[key]))\n    .join('&');\n\n  return [\n    widthQ ? `w=${widthQ}` : '',\n    heightQ ? ((widthQ ? '&' : '') + `h=${heightQ}`) : '',\n    restParamsQ ? '&' + restParamsQ : ''\n  ].join('');\n};\n\nconst getParamsExceptSizeRelated = params => {\n  const { w, h, width, height, ...restParams } = params;\n\n  return [restParams, w || width, h || height];\n};\n\nconst getLowQualitySize = (params = {}, factor) => {\n  let { width, height } = params;\n\n  width = width ? Math.floor(width / factor) : null;\n  height = height ? Math.floor(height / factor) : null;\n\n  return { width, w: width, height, h: height };\n};\n\nconst getAdaptiveSize = (sizes, presets) => {\n  const resultSizes = [];\n\n  Object.keys(sizes).forEach(key => {\n    const isCustomMedia = key.indexOf(':') > -1;\n    const media = isCustomMedia ? key : presets[key];\n\n    resultSizes.push({ media, params: normalizeSize(sizes[key]) });\n  });\n\n  return resultSizes;\n};\n\nconst normalizeSize = (params = {}) => {\n  let { w = params.width || '', h = params.height || '', r = params.r } = params;\n\n  if ((w.toString()).indexOf('vw') > -1) {\n    const percent = parseFloat(w);\n\n    w = window.innerWidth * percent / 100;\n  } else {\n    w = parseFloat(w);\n  }\n\n  if ((h.toString()).indexOf('vh') > -1) {\n    const percent = parseFloat(h);\n\n    h = window.innerHeight * percent / 100;\n  } else {\n    h = parseFloat(h);\n  }\n\n  return { w, h, r };\n}\n\nconst getBreakPoint = (sizes, presets) => {\n  const size = getAdaptiveSize(sizes, presets);\n\n  return [...size].reverse().find(item => window.matchMedia(item.media).matches);\n}\n\nexport const getSizeLimit = (size, exactSize) => {\n  if (exactSize) return Math.ceil(size);\n  if (size <= 25) return 25;\n  if (size <= 50) return 50;\n\n  return Math.ceil(size / 100) * 100;\n};\n\nconst filterImages = (images, type) => {\n  const filtered = [];\n\n  for (let i = 0; i < images.length; i++) {\n    const image = images[i];\n    const isProcessed = image.className.includes(type);\n\n    if (!isProcessed) {\n      filtered.push(image);\n    }\n  }\n\n  return filtered;\n};\n\nconst getCommonImageProps = (image) => ({\n  sizes: getSize(attr(image, 'ci-sizes') || attr(image, 'data-ci-size') || {}) || undefined,\n  params: getParams(attr(image, 'ci-params') || attr(image, 'data-ci-params') || {}),\n  imageNodeRatio: attr(image, 'ci-ratio') || attr(image, 'data-ci-ratio') || undefined,\n  blurHash: attr(image, 'ci-blur-hash') || attr(image, 'data-ci-blur-hash') || undefined,\n  isLazyCanceled: (attr(image, 'ci-not-lazy') !== null || attr(image, 'data-ci-not-lazy') !== null) || undefined,\n  preserveSize: (attr(image, 'ci-preserve-size') !== null || attr(image, 'data-preserve-size') !== null) || undefined,\n  imageNodeWidth: attr(image, 'width'),\n  imageNodeHeight: attr(image, 'height')\n});\n\nconst getParams = (params) => {\n  let resultParams = undefined;\n\n  try {\n    let temp = params.replace(/(\\w+:)|(\\w+ :)/g, function (matchedStr) {\n      return '\"' + matchedStr.substring(0, matchedStr.length - 1) + '\":';\n    });\n\n    resultParams = JSON.parse(temp);\n  } catch (e) {}\n\n  if (!resultParams) {\n    try {\n      resultParams = JSON.parse('{\"' + decodeURI(params.replace(/&/g, \"\\\",\\\"\").replace(/=/g, \"\\\":\\\"\")) + '\"}');\n    } catch (e) {}\n  }\n\n  return resultParams;\n}\n\nconst getSize = (sizes) => {\n  let resultSizes = null;\n\n  try {\n    // add quotes around params\n    let temp = sizes.replace(/(\\w+:)|(\\w+ :)/g, function (matchedStr) {\n      return '\"' + matchedStr.substring(0, matchedStr.length - 1) + '\":';\n    });\n    // change single quotes to double quotes\n    temp = temp.replace(/'/g, '\"').replace(/-\"width\":/g, '-width:');\n    resultSizes = JSON.parse(temp);\n  } catch (e) {}\n\n  if (resultSizes) {\n    Object.keys(resultSizes).forEach(key => {\n      if (typeof resultSizes[key] === 'string') {\n        try {\n          resultSizes[key] = JSON.parse('{\"' + decodeURI(resultSizes[key].replace(/&/g, \"\\\",\\\"\").replace(/=/g, \"\\\":\\\"\")) + '\"}');\n        } catch (e) {}\n      }\n    });\n  }\n\n  return resultSizes;\n}\n\nconst getImageProps = (image) => {\n  const props = {\n    ...getCommonImageProps(image),\n    alignment: attr(image, 'ci-align') || attr(image, 'data-ci-align') || 'auto',\n    imageNodeSRC: attr(image, 'ci-src') || attr(image, 'data-ci-src') || undefined\n  };\n  const params = {\n    ...getParamsFromURL(props.imageNodeSRC),\n    ...props.params\n  };\n\n  return {\n    ...props,\n    params,\n    isAdaptive: !!props.sizes,\n    imageNodeSRC: getURLWithoutQueryParams(props.imageNodeSRC)\n  };\n};\n\nconst getBackgroundImageProps = (image) => {\n  const props = {\n    ...getCommonImageProps(image),\n    imageNodeSRC: attr(image, 'ci-bg-url') || attr(image, 'data-ci-bg-url') || undefined\n  };\n  const params = {\n    ...getParamsFromURL(props.imageNodeSRC),\n    ...props.params\n  };\n\n  return {\n    ...props,\n    params,\n    isAdaptive: !!props.sizes,\n    imageNodeSRC: getURLWithoutQueryParams(props.imageNodeSRC)\n  };\n};\n\nconst getURLWithoutQueryParams = url => url.split('?')[0];\n\nconst getParamsFromURL = (url) => {\n  const queryIndex = url.indexOf('?');\n\n  if (queryIndex === -1) return;\n\n  return getParams(url.slice(queryIndex + 1));\n};\n\nconst attr = (element, attribute) => element.getAttribute(attribute);\n\nexport const isOldBrowsers = (isBlurHash) => {\n  let support = true;\n\n  if (isBlurHash) {\n    try {\n      new window.ImageData(new Uint8ClampedArray([0, 0, 0, 0]), 1, 1);\n    } catch (e) {\n      support = false\n    }\n  }\n\n  return Element.prototype.hasOwnProperty('prepend') && support;\n};\n\nconst addClass = (elem, className) => {\n  if (!(elem.className.indexOf(className) > -1)) {\n    elem.className += ' ' + className;\n  }\n};\n\nconst removeClass = (elem, className) => {\n  if (elem.className.indexOf(className) > -1) {\n    elem.className = elem.className.replace(new RegExp('\\\\b' + className + '\\\\b', 'g'), '');\n  }\n};\n\nconst DEVICE_PIXEL_RATIO_LIST = [1, 1.5, 2, 3, 4];\n\nconst getInitialConfigLowPreview = (config) => {\n  const {\n    token = '',\n    domain = 'cloudimg.io',\n    lazyLoading = false,\n    imgLoadingAnimation = true,\n    width = '400',\n    height = '300',\n    placeholderBackground = '#f4f4f4',\n    baseUrl, // to support old name\n    baseURL,\n    ratio,\n    presets,\n    params = 'org_if_sml=1',\n    init = true,\n    exactSize = false,\n    doNotReplaceURL = false\n  } = config;\n\n  return {\n    token,\n    domain,\n    lazyLoading,\n    imgLoadingAnimation,\n    width,\n    height,\n    placeholderBackground,\n    baseURL: baseUrl || baseURL,\n    ratio,\n    exactSize,\n    presets: presets ? presets :\n      {\n        xs: '(max-width: 575px)',  // to 575       PHONE\n        sm: '(min-width: 576px)',  // 576 - 767    PHABLET\n        md: '(min-width: 768px)',  // 768 - 991    TABLET\n        lg: '(min-width: 992px)',  // 992 - 1199   SMALL_LAPTOP_SCREEN\n        xl: '(min-width: 1200px)'  // from 1200    USUALSCREEN\n      },\n    params: getParams(params),\n    innerWidth: window.innerWidth,\n    init,\n    previewQualityFactor: 10,\n    doNotReplaceURL,\n    devicePixelRatioList: DEVICE_PIXEL_RATIO_LIST\n    //isChrome: /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor)\n  };\n};\n\nconst getInitialConfigPlain = (config) => {\n  const {\n    token = '',\n    domain = 'cloudimg.io',\n    lazyLoading = false,\n    width = '400',\n    height = '300',\n    baseUrl, // to support old name\n    baseURL,\n    presets,\n    params = 'org_if_sml=1',\n    init = true,\n    exactSize = false,\n    doNotReplaceURL = false\n  } = config;\n\n  return {\n    token,\n    domain,\n    lazyLoading,\n    width,\n    height,\n    baseURL: baseUrl || baseURL,\n    exactSize,\n    presets: presets ? presets :\n      {\n        xs: '(max-width: 575px)',  // to 575       PHONE\n        sm: '(min-width: 576px)',  // 576 - 767    PHABLET\n        md: '(min-width: 768px)',  // 768 - 991    TABLET\n        lg: '(min-width: 992px)',  // 992 - 1199   SMALL_LAPTOP_SCREEN\n        xl: '(min-width: 1200px)'  // from 1200    USUALSCREEN\n      },\n    params: getParams(params),\n    innerWidth: window.innerWidth,\n    init,\n    doNotReplaceURL,\n    devicePixelRatioList: DEVICE_PIXEL_RATIO_LIST\n    //isChrome: /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor)\n  };\n};\n\nconst getInitialConfigBlurHash = (config) => {\n  const {\n    token = '',\n    domain = 'cloudimg.io',\n    lazyLoading = false,\n    placeholderBackground = '#f4f4f4',\n    baseUrl,\n    baseURL,\n    presets,\n    ratio,\n    params = 'org_if_sml=1',\n    init = true,\n    exactSize = false,\n    doNotReplaceURL = false\n  } = config;\n\n  return {\n    token,\n    domain,\n    lazyLoading,\n    placeholderBackground,\n    baseURL: baseUrl || baseURL,\n    ratio,\n    exactSize,\n    presets: presets ? presets :\n      {\n        xs: '(max-width: 575px)',  // to 575       PHONE\n        sm: '(min-width: 576px)',  // 576 - 767    PHABLET\n        md: '(min-width: 768px)',  // 768 - 991    TABLET\n        lg: '(min-width: 992px)',  // 992 - 1199   SMALL_LAPTOP_SCREEN\n        xl: '(min-width: 1200px)'  // from 1200    USUALSCREEN\n      },\n    params: getParams(params),\n    innerWidth: window.innerWidth,\n    init,\n    previewQualityFactor: 10,\n    doNotReplaceURL,\n    devicePixelRatioList: DEVICE_PIXEL_RATIO_LIST\n  };\n};\n\nconst finishAnimation = (image, isBackground, canvas) => {\n  if (canvas) {\n    if (isBackground) {\n      canvas.style.opacity = '0';\n    } else {\n      canvas.style.opacity = '0';\n      image.style.opacity = '1';\n    }\n  } else if (!isBackground) {\n    image.style.filter = 'blur(0px)';\n    image.style.transform = 'translateZ(0) scale(1)';\n  } else {\n    removeClass(image, 'ci-bg-animation');\n\n    setTimeout(() => {\n      image.style.removeProperty('overflow');\n    }, 300)\n  }\n\n  addClass(image, 'ci-image-loaded');\n};\n\nconst getWrapper = (image) => {\n  if ((image.parentNode.className || '').indexOf('ci-image-wrapper') > -1) {\n    return image.parentNode;\n  } else if ((image.parentNode.parentNode.className || '').indexOf('ci-image-wrapper') > -1) {\n    return image.parentNode.parentNode;\n  }\n};\n\nconst setWrapperAlignment = (wrapper, alignment) => {\n  switch (alignment) {\n    case 'auto':\n      break;\n    case 'center':\n      wrapper.style.margin = 'auto';\n  }\n}\n\nconst isImageSVG = url => url.slice(-4).toLowerCase() === '.svg';\n\nexport const determineContainerProps = props => {\n  const { imgNode, config, imageNodeWidth, imageNodeHeight, imageNodeRatio, params, size } = props;\n  const { exactSize } = config;\n  let width = getWidth({ imgNode, config, exactSize, imageNodeWidth, params: { ...config.params, ...params }, size });\n  let height = getHeight({ imgNode, config, exactSize, imageNodeHeight, params: { ...config.params, ...params }, size, width });\n  let ratio = getRatio({ imageNodeRatio, width, height, size });\n\n  if (!height && width && ratio) {\n    height = Math.floor(width / ratio);\n  }\n\n  if (!width && height && ratio) {\n    width = Math.floor(height * ratio);\n  }\n\n  return { width, height, ratio };\n}\n\nexport const getRatio = ({ imageNodeRatio, width, height, size }) => {\n  if (size && size.params) {\n    if (size.params.r || size.params.ratio) {\n      return size.params.r || size.params.ratio;\n    } else if ((size.params.w || size.params.width) && (size.params.h || size.params.height)) {\n      return (size.params.w || size.params.width) / (size.params.h || size.params.height);\n    } else {\n      return null\n    }\n  }\n\n  if (imageNodeRatio) {\n    return imageNodeRatio;\n  } else if (width && height) {\n    return width / height;\n  }\n\n  return null;\n}\n\n/**\n * Get width for an image.\n *\n * Priority:\n * 1. image node param width\n * 2. image node image width\n * 3. image node inline styling\n * 4. parent node of image computed style width (up to body tag)\n *\n * @param {HTMLImageElement} props.imgNode - image node\n * @param {Boolean} props.exactSize - a flag to use exact width/height params\n * @param {Number} props.imageNodeWidth - width of image node\n * @param {String} props.params - params of image node\n * @return {Number} width limit\n */\nexport const getWidth = props => {\n  const {\n    imgNode = null,\n    exactSize = false,\n    imageNodeWidth = null,\n    params = {},\n    size,\n    config = {}\n  } = props;\n  const crop = isCrop(params.func || config.params.func);\n  const sizeParamsWidth = size && size.params && (size.params.w || size.params.width);\n  const paramsWidth = params.width || params.w;\n  const imageNodeWidthPX = imageNodeWidth && convertToPX(imageNodeWidth);\n  const imageContainerWidth = getImageContainerWidth(imgNode);\n  const result = crop ? imageContainerWidth : getSizeLimit(imageContainerWidth, exactSize);\n\n  if (size && size.params) {\n    if (size.params.r) {\n      if (params.width || params.w) {\n        return paramsWidth;\n      }\n\n      if (imageNodeWidth) {\n        return imageNodeWidthPX;\n      }\n\n      return result\n    }\n\n    return sizeParamsWidth;\n  }\n\n  if (paramsWidth) {\n    return paramsWidth;\n  }\n\n  if (imageNodeWidth) {\n    return imageNodeWidthPX;\n  }\n\n  return result;\n}\n\n/**\n * Get height for an image.\n *\n * Priority:\n * 1. image node param height\n * 2. image node image height\n * 3. image node inline styling\n * 4. parent node of image computed style height (up to body tag)\n *\n * @param {HTMLImageElement} props.imgNode - image node\n * @param {Object} props.config - plugin config\n * @param {Boolean} props.exactSize - a flag to use exact width/height params\n * @param {Number} props.imageNodeHeight - height of image node\n * @param {String} props.params - params of image node\n * @return {Number} height limit\n */\nexport const getHeight = props => {\n  const {\n    imgNode = null,\n    config = {},\n    exactSize = false,\n    imageNodeHeight = null,\n    params = {},\n    size,\n    width\n  } = props;\n  const crop = isCrop(params.func || config.params.func);\n  const sizeParamsHeight = size && size.params && (size.params.h || size.params.height);\n  const paramsRatio = size && size.params && (size.params.ratio || size.params.r);\n  const paramsHeight = params.height || params.h;\n  const imageNodeHeightPX = imageNodeHeight && convertToPX(imageNodeHeight);\n  const imageContainerHeight = getImageContainerHeight(imgNode);\n  const result = crop ? imageContainerHeight : getSizeLimit(imageContainerHeight, exactSize);\n\n  if (size && size.params) {\n    if (paramsRatio && width) {\n      return width / paramsRatio;\n    }\n\n    return sizeParamsHeight;\n  }\n\n  if (paramsHeight) {\n    return paramsHeight;\n  }\n\n  if (imageNodeHeight) {\n    return imageNodeHeightPX;\n  }\n\n  if (!crop) {\n    return null;\n  }\n\n  return result;\n};\n\n/**\n * Get container height for an image.\n *\n * Priority:\n * 1. inline styling\n * 2. parent node computed style width (up to body tag)\n *\n * @param {HTMLImageElement} img - image node\n * @return {Number} width of image container\n */\nexport const getImageContainerHeight = (img) => {\n  const imageStyleHeight = img && img.style && img.style.height && !img.style.height.includes('%');\n  const imageHeight = convertToPX(imageStyleHeight);\n\n  if (imageHeight) return parseInt(imageHeight, 10);\n\n  return parseInt(getParentContainerSize(img, 'height'), 10);\n}\n\n/**\n * Get container width for an image.\n *\n * Priority:\n * 1. inline styling\n * 2. parent node computed style width (up to body tag)\n *\n * @param {HTMLImageElement} img - image node\n * @return {Number} width of image container\n */\nexport const getImageContainerWidth = (img) => {\n  const imageStyleWidth = img && img.style && img.style.width && !img.style.width.includes('%');\n  const imageWidth = imageStyleWidth && convertToPX(imageStyleWidth);\n\n  if (imageWidth) return parseInt(imageWidth, 10);\n\n  return parseInt(getParentContainerSize(img), 10);\n}\n\nexport const convertToPX = (size = '') => {\n  size = size.toString();\n\n  if (size.indexOf('px') > -1) {\n    return parseInt(size);\n  } else if (size.indexOf('%') > -1) {\n    // todo calculate container width * %\n  } else if (size.indexOf('vw') > -1) {\n    return window.innerWidth * parseInt(size) / 100;\n  } else if (size.indexOf('vh') > -1) {\n    return window.innerHeight * parseInt(size) / 100;\n  }\n\n  return parseInt(size) || null;\n}\n\nconst getParentContainerSize = (img, type = 'width') => {\n  let parentNode = null;\n  let size = 0;\n\n  do {\n    parentNode = (parentNode && parentNode.parentNode) || img.parentNode;\n    size = parentNode.getBoundingClientRect()[type];\n  } while (parentNode && !size)\n\n  const leftPadding = size && parentNode && parseInt(window.getComputedStyle(parentNode).paddingLeft);\n  const rightPadding = parseInt(window.getComputedStyle(parentNode).paddingRight)\n\n  return size + (size ? (-leftPadding - rightPadding) : 0);\n};\n\nconst isLazy = (lazyLoading, isLazyCanceled, isUpdate) => {\n  if ((isLazyCanceled && lazyLoading) || isUpdate) {\n    lazyLoading = false;\n  }\n\n  return lazyLoading;\n};\n\nexport const isApplyLowQualityPreview = (isAdaptive, width, isSVG) => isAdaptive ? width > 400 : width > 400 && !isSVG;\n\nexport const setSrc = (image, url, propertyName, lazy, imgSrc, isSVG, dataSrcAttr) => {\n  image.setAttribute(\n    lazy ? (propertyName ? propertyName : 'data-src') : (dataSrcAttr ? dataSrcAttr : 'src'),\n    isSVG ? imgSrc : url\n  );\n};\n\nexport const setSrcset = (image, urls, propertyName, lazy, imgSrc, isSVG, dataSrcAttr) => {\n  if (isSVG) return;\n\n  image.setAttribute(\n    lazy ? (propertyName ? propertyName : 'data-srcset') : (dataSrcAttr ? dataSrcAttr : 'srcset'),\n    urls.map(({ dpr, url }) => `${url} ${dpr}x`).join(', ')\n  );\n};\n\nexport const setBackgroundSrc = (image, url, lazy, imgSrc, isSVG, dataSrcAttr) => {\n  const resultLink = isSVG ? imgSrc : url;\n\n  if (lazy) {\n    image.setAttribute((dataSrcAttr ? dataSrcAttr : 'data-bg'), resultLink);\n  } else {\n    image.style.backgroundImage = `url('${resultLink}')`\n  }\n};\n\nexport const isCrop = func => ['crop', 'fit', 'bound', 'cover'].includes(func);\n\nexport {\n  checkIfRelativeUrlPath,\n  getImgSrc,\n  generateUrl,\n  getBreakPoint,\n  filterImages,\n  getImageProps,\n  getBackgroundImageProps,\n  addClass,\n  removeClass,\n  getAdaptiveSize,\n  getLowQualitySize,\n  getInitialConfigLowPreview,\n  getInitialConfigBlurHash,\n  getInitialConfigPlain,\n  finishAnimation,\n  getWrapper,\n  getParams,\n  setWrapperAlignment,\n  isImageSVG,\n  isLazy\n}","//import 'core-js/features/typed-array/uint8-clamped-array';\n//import './prepend.polyfill';\nimport CIResponsive from './ci.service';\n\nwindow.CIResponsive = CIResponsive;","import {\n  determineContainerProps,\n  filterImages,\n  generateUrl,\n  getBackgroundImageProps,\n  getBreakPoint,\n  getImageProps,\n  getImgSrc,\n  getInitialConfigBlurHash,\n  isLazy,\n  isOldBrowsers,\n  setBackgroundSrc,\n  setSrc,\n  setSrcset\n} from '../common/ci.utils';\nimport {\n  applyOrUpdateBlurHashCanvas,\n  applyOrUpdateWrapper,\n  finishAnimation,\n  initImageBackgroundClasses,\n  initImageBackgroundStyles,\n  initImageClasses,\n  initImageStyles,\n  loadBackgroundImage,\n  onImageLoad\n} from './ci.utils';\nimport { debounce } from 'throttle-debounce';\n\n\nexport default class CIResponsive {\n  constructor(config) {\n    this.config = getInitialConfigBlurHash(config);\n\n    if (this.config.init) this.init();\n\n    this.innerWidth = window.innerWidth;\n  }\n\n  init() {\n    document.addEventListener('lazybeforeunveil', loadBackgroundImage);\n    window.addEventListener('resize', debounce(100, this.onUpdateDimensions.bind(this)));\n\n    this.process();\n  }\n\n  onUpdateDimensions() {\n    this.process(true);\n\n    if (this.innerWidth < window.innerWidth) {\n      this.innerWidth = window.innerWidth;\n    }\n  }\n\n  process(isUpdate) {\n    let images, backgroundImages;\n    const windowScreenBecomesBigger = this.innerWidth < window.innerWidth;\n\n    if (isUpdate) {\n      images = document.querySelectorAll('img[ci-src]');\n      backgroundImages = document.querySelectorAll('[ci-bg-url]');\n    } else {\n      images = filterImages(document.querySelectorAll('img[ci-src]'), 'ci-image');\n      backgroundImages = filterImages(document.querySelectorAll('[ci-bg-url]'), 'ci-bg');\n    }\n\n    if (images.length > -1) {\n      images.forEach(imgNode => {\n        this.getBasicInfo(imgNode, isUpdate, windowScreenBecomesBigger, 'image');\n      });\n    }\n\n    if (backgroundImages.length > -1) {\n      backgroundImages.forEach(imgNode => {\n        this.getBasicInfo(imgNode, isUpdate, windowScreenBecomesBigger, 'background');\n      });\n    }\n  }\n\n  getBasicInfo = (imgNode, isUpdate, windowScreenBecomesBigger, type) => {\n    const isImage = type === 'image';\n    const { config } = this;\n    const { baseURL, lazyLoading, presets, devicePixelRatioList } = config;\n    const imgProps = isImage ? getImageProps(imgNode) : getBackgroundImageProps(imgNode);\n    const { params, imageNodeSRC, blurHash, isLazyCanceled, sizes, isAdaptive, preserveSize } = imgProps;\n\n    if (!imageNodeSRC) return;\n\n    const [src, isSVG] = getImgSrc(imageNodeSRC, baseURL);\n    const lazy = isLazy(lazyLoading, isLazyCanceled, isUpdate);\n    let size;\n\n    if (!isOldBrowsers(true)) {\n      if (isImage) {\n        imgNode.src = src;\n      } else {\n        imgNode.style.backgroundImage = 'url(' + src + ')';\n      }\n\n      return;\n    }\n\n    if (isAdaptive) {\n      size = getBreakPoint(sizes, presets);\n    } else {\n      if (isUpdate && !windowScreenBecomesBigger) return;\n    }\n\n    const containerProps = determineContainerProps({ ...imgProps, imgNode, config, size });\n\n    const generateURLbyDPR = devicePixelRatio => generateUrl({ src, params, config, ...containerProps, devicePixelRatio })\n    const cloudimageUrl = generateURLbyDPR();\n    const cloudimageSrcset = devicePixelRatioList.map(dpr => ({ dpr: dpr.toString(), url: generateURLbyDPR(dpr) }));\n    const props = {\n      config,\n      isUpdate,\n      imgNode,\n      containerProps,\n      imgProps,\n      lazy,\n      blurHash,\n      cloudimageUrl,\n      isSVG,\n      src,\n      preserveSize,\n      isAdaptive\n    };\n\n    if (isImage) {\n      this.processImage({ ...props, cloudimageUrl: generateURLbyDPR(1), cloudimageSrcset });\n    } else {\n      this.processBackgroundImage(props);\n    }\n  }\n\n  processImage(props) {\n    const { config, isUpdate, imgNode, containerProps, imgProps, lazy, blurHash, cloudimageUrl, isSVG, src, preserveSize, cloudimageSrcset, isAdaptive } = props;\n    const { ratio } = containerProps;\n    const { placeholderBackground, dataSrcAttr } = config;\n    const wrapper = applyOrUpdateWrapper({ isUpdate, imgNode, ratio, placeholderBackground, ...imgProps });\n\n    if (!isUpdate) {\n      initImageClasses(imgNode, lazy);\n      initImageStyles(imgNode);\n\n      const canvas = applyOrUpdateBlurHashCanvas(wrapper, blurHash);\n\n      imgNode.onload = () => {\n        onImageLoad({ wrapper, imgNode, canvas: blurHash && canvas, ratio, preserveSize, isAdaptive })\n      };\n    }\n\n    setSrcset(imgNode, cloudimageSrcset, 'data-srcset', lazy, src, isSVG, dataSrcAttr);\n    setSrc(imgNode, cloudimageUrl, null, lazy, src, isSVG, dataSrcAttr);\n  }\n\n  processBackgroundImage(props) {\n    const { config, isUpdate, imgNode, lazy, blurHash, cloudimageUrl, isSVG, src } = props;\n    const { dataSrcAttr } = config;\n\n    if (!isUpdate) {\n      initImageBackgroundClasses(imgNode, lazy);\n      initImageBackgroundStyles(imgNode);\n\n      const canvas = applyOrUpdateBlurHashCanvas(imgNode, blurHash);\n\n      if (!lazy) {\n        let tempImage = new Image();\n\n        tempImage.src = cloudimageUrl;\n\n        tempImage.onload = () => {\n          finishAnimation(imgNode, blurHash && canvas);\n        };\n      }\n    }\n\n    setBackgroundSrc(imgNode, cloudimageUrl, lazy, src, isSVG, dataSrcAttr);\n  }\n}","import { addClass, getWrapper, setWrapperAlignment } from '../common/ci.utils'\nimport { decode } from './blurHash';\n\n\nexport const loadBackgroundImage = (event) => {\n  const bgContainer = event.target;\n  const bg = bgContainer.getAttribute('data-bg');\n  const ciBlurHash = bgContainer.getAttribute('ci-blur-hash');\n\n  if (bg) {\n    let optimizedImage = new Image();\n\n    optimizedImage.onload = () => {\n      const bgCanvas = bgContainer.querySelector('canvas');\n\n      finishAnimation(bgContainer, ciBlurHash && bgCanvas);\n      bgContainer.removeAttribute('data-bg');\n      bgContainer.removeAttribute('ci-preview');\n    }\n\n    optimizedImage.src = bg;\n\n    bgContainer.style.backgroundImage = 'url(' + bg + ')';\n  }\n};\n\nexport const applyOrUpdateWrapper = props => {\n  const { isUpdate, imgNode, ratio, imageNodeWidth, imageNodeHeight, alignment, preserveSize, placeholderBackground } = props;\n  let wrapper;\n\n  if (!isUpdate) {\n    wrapper = wrapImage({ imgNode, ratio, imageNodeWidth, imageNodeHeight, alignment, preserveSize, placeholderBackground });\n  } else {\n    wrapper = getWrapper(imgNode);\n\n    // TODO: remove in next release\n    // if (ratio) {\n    //   wrapper.style.paddingBottom = preserveSize ? 'none' : (100 / ratio) + '%';\n    // }\n  }\n\n  return wrapper;\n}\n\nexport const wrapImage = (props) => {\n  const { imgNode, ratio, imageNodeWidth, imageNodeHeight, alignment, preserveSize, placeholderBackground } = props;\n  let { wrapper } = props;\n\n  wrapper = wrapper || document.createElement('div');\n\n  addClass(wrapper, 'ci-image-wrapper');\n  wrapper.style.background = placeholderBackground;\n  wrapper.style.display = 'block';\n  wrapper.style.width = preserveSize ? imageNodeWidth : '100%';\n  wrapper.style.height = preserveSize ? imageNodeHeight : 'auto';\n  wrapper.style.overflow = 'hidden';\n  wrapper.style.position = 'relative';\n\n  if (ratio) {\n    wrapper.style.paddingBottom = preserveSize ? 'none' : (100 / ratio) + '%';\n  }\n\n  if (imgNode.nextSibling) {\n    imgNode.parentNode.insertBefore(wrapper, imgNode.nextSibling);\n  } else {\n    imgNode.parentNode.appendChild(wrapper);\n  }\n\n  setWrapperAlignment(wrapper, alignment);\n\n  wrapper.appendChild(imgNode);\n\n  return wrapper;\n};\n\nexport const finishAnimation = (image, canvas) => {\n  if (canvas && canvas.style) {\n    canvas.style.opacity = '0';\n  }\n\n  addClass(image, 'ci-image-loaded');\n};\n\nexport const initImageBackgroundClasses = (image, lazy) => {\n  addClass(image, 'ci-bg');\n\n  if (lazy) {\n    addClass(image, 'lazyload');\n  }\n};\n\nexport const initImageBackgroundStyles = (image) => {\n  image.style.position = (!image.style.position || image.style.position === 'static') ?\n    'relative' : image.style.position;\n};\n\nexport const initImageClasses = (imgNode, lazy) => {\n  addClass(imgNode, 'ci-image');\n\n  if (lazy) {\n    addClass(imgNode, 'lazyload');\n  }\n};\n\nexport const initImageStyles = imgNode => {\n  imgNode.style.display = 'block';\n  imgNode.style.width = '100%';\n  imgNode.style.padding = '0';\n  imgNode.style.position = 'absolute';\n  imgNode.style.top = '0';\n  imgNode.style.left = '0';\n  imgNode.style.height = 'auto';\n  imgNode.style.transition = 'opacity 400ms ease 0ms';\n};\n\nexport const applyOrUpdateBlurHashCanvas = (wrapper, blurHash) => {\n  let canvas = wrapper.querySelector('canvas');\n\n  if (!canvas && blurHash) {\n    canvas = document.createElement(\"canvas\");\n\n    const pixels = decode(blurHash, 32, 32);\n    canvas.width = 32;\n    canvas.height = 32;\n    const ctx = canvas.getContext(\"2d\");\n    const imageData = ctx.getImageData(0, 0, 32, 32);\n    imageData.data.set(pixels);\n    ctx.putImageData(imageData, 0, 0);\n    canvas.style.width = '100%';\n    canvas.style.height = '100%';\n    canvas.style.position = 'absolute';\n    canvas.style.top = '0';\n    canvas.style.bottom = '0';\n    canvas.style.left = '0';\n    canvas.style.right = '0';\n    canvas.style.opacity = '1';\n    canvas.style.zIndex = '1';\n    canvas.style.transition = 'opacity 400ms ease 0ms';\n\n    wrapper.prepend(canvas);\n  }\n\n  return canvas;\n};\n\nexport const onImageLoad = ({ wrapper, imgNode, canvas, preserveSize, ratio, isAdaptive }) => {\n  wrapper.style.background = 'transparent';\n\n  if (!ratio || isAdaptive) {\n    wrapper.style.paddingBottom = preserveSize ? 'none' : (100 / ((imgNode.width / imgNode.height) || 1)) + '%';\n  }\n\n  finishAnimation(imgNode, canvas)\n};","import './imageDataPolyfill';\n\nexport { default as decode, isBlurhashValid } from \"./decode\";","import { decode83 } from \"./base83\";\nimport { sRGBToLinear, signPow, linearTosRGB } from \"./utils\";\nimport { ValidationError } from \"./error\";\n\n/**\n * Returns an error message if invalid or undefined if valid\n * @param blurhash\n */\nconst validateBlurhash = (blurhash) => {\n  if (!blurhash || blurhash.length < 6) {\n    throw new ValidationError(\n      \"The blurhash string must be at least 6 characters\"\n    );\n  }\n\n  const sizeFlag = decode83(blurhash[0]);\n  const numY = Math.floor(sizeFlag / 9) + 1;\n  const numX = (sizeFlag % 9) + 1;\n\n  if (blurhash.length !== 4 + 2 * numX * numY) {\n    throw new ValidationError(\n      `blurhash length mismatch: length is ${\n        blurhash.length\n        } but it should be ${4 + 2 * numX * numY}`\n    );\n  }\n};\n\nexport const isBlurhashValid = (blurhash) => {\n  try {\n    validateBlurhash(blurhash);\n  } catch (error) {\n    return { result: false, errorReason: error.message };\n  }\n\n  return { result: true };\n};\n\nconst decodeDC = (value) => {\n  const intR = value >> 16;\n  const intG = (value >> 8) & 255;\n  const intB = value & 255;\n  return [sRGBToLinear(intR), sRGBToLinear(intG), sRGBToLinear(intB)];\n};\n\nconst decodeAC = (value, maximumValue) => {\n  const quantR = Math.floor(value / (19 * 19));\n  const quantG = Math.floor(value / 19) % 19;\n  const quantB = value % 19;\n\n  const rgb = [\n    signPow((quantR - 9) / 9, 2.0) * maximumValue,\n    signPow((quantG - 9) / 9, 2.0) * maximumValue,\n    signPow((quantB - 9) / 9, 2.0) * maximumValue\n  ];\n\n  return rgb;\n};\n\nconst decode = (blurhash, width, height, punch) => {\n  validateBlurhash(blurhash);\n\n  punch = punch | 1;\n\n  const sizeFlag = decode83(blurhash[0]);\n  const numY = Math.floor(sizeFlag / 9) + 1;\n  const numX = (sizeFlag % 9) + 1;\n\n  const quantisedMaximumValue = decode83(blurhash[1]);\n  const maximumValue = (quantisedMaximumValue + 1) / 166;\n\n  const colors = new Array(numX * numY);\n\n  for (let i = 0; i < colors.length; i++) {\n    if (i === 0) {\n      const value = decode83(blurhash.substring(2, 6));\n      colors[i] = decodeDC(value);\n    } else {\n      const value = decode83(blurhash.substring(4 + i * 2, 6 + i * 2));\n      colors[i] = decodeAC(value, maximumValue * punch);\n    }\n  }\n\n  const bytesPerRow = width * 4;\n  const pixels = new Uint8ClampedArray(bytesPerRow * height);\n\n  for (let y = 0; y < height; y++) {\n    for (let x = 0; x < width; x++) {\n      let r = 0;\n      let g = 0;\n      let b = 0;\n\n      for (let j = 0; j < numY; j++) {\n        for (let i = 0; i < numX; i++) {\n          const basis =\n            Math.cos((Math.PI * x * i) / width) *\n            Math.cos((Math.PI * y * j) / height);\n          let color = colors[i + j * numX];\n          r += color[0] * basis;\n          g += color[1] * basis;\n          b += color[2] * basis;\n        }\n      }\n\n      let intR = linearTosRGB(r);\n      let intG = linearTosRGB(g);\n      let intB = linearTosRGB(b);\n\n      pixels[4 * x + 0 + y * bytesPerRow] = intR;\n      pixels[4 * x + 1 + y * bytesPerRow] = intG;\n      pixels[4 * x + 2 + y * bytesPerRow] = intB;\n      pixels[4 * x + 3 + y * bytesPerRow] = 255; // alpha\n    }\n  }\n  return pixels;\n};\n\nexport default decode;\n","const digitCharacters = [\n  \"0\",\n  \"1\",\n  \"2\",\n  \"3\",\n  \"4\",\n  \"5\",\n  \"6\",\n  \"7\",\n  \"8\",\n  \"9\",\n  \"A\",\n  \"B\",\n  \"C\",\n  \"D\",\n  \"E\",\n  \"F\",\n  \"G\",\n  \"H\",\n  \"I\",\n  \"J\",\n  \"K\",\n  \"L\",\n  \"M\",\n  \"N\",\n  \"O\",\n  \"P\",\n  \"Q\",\n  \"R\",\n  \"S\",\n  \"T\",\n  \"U\",\n  \"V\",\n  \"W\",\n  \"X\",\n  \"Y\",\n  \"Z\",\n  \"a\",\n  \"b\",\n  \"c\",\n  \"d\",\n  \"e\",\n  \"f\",\n  \"g\",\n  \"h\",\n  \"i\",\n  \"j\",\n  \"k\",\n  \"l\",\n  \"m\",\n  \"n\",\n  \"o\",\n  \"p\",\n  \"q\",\n  \"r\",\n  \"s\",\n  \"t\",\n  \"u\",\n  \"v\",\n  \"w\",\n  \"x\",\n  \"y\",\n  \"z\",\n  \"#\",\n  \"$\",\n  \"%\",\n  \"*\",\n  \"+\",\n  \",\",\n  \"-\",\n  \".\",\n  \":\",\n  \";\",\n  \"=\",\n  \"?\",\n  \"@\",\n  \"[\",\n  \"]\",\n  \"^\",\n  \"_\",\n  \"{\",\n  \"|\",\n  \"}\",\n  \"~\"\n];\n\nexport const decode83 = (str) => {\n  let value = 0;\n  for (let i = 0; i < str.length; i++) {\n    const c = str[i];\n    const digit = digitCharacters.indexOf(c);\n    value = value * 83 + digit;\n  }\n  return value;\n};\n\nexport const encode83 = (n, length) => {\n  var result = \"\";\n  for (let i = 1; i <= length; i++) {\n    let digit = (Math.floor(n) / Math.pow(83, length - i)) % 83;\n    result += digitCharacters[Math.floor(digit)];\n  }\n  return result;\n};\n","export const sRGBToLinear = (value) => {\n  let v = value / 255;\n  if (v <= 0.04045) {\n    return v / 12.92;\n  } else {\n    return Math.pow((v + 0.055) / 1.055, 2.4);\n  }\n};\n\nexport const linearTosRGB = (value) => {\n  let v = Math.max(0, Math.min(1, value));\n  if (v <= 0.0031308) {\n    return Math.round(v * 12.92 * 255 + 0.5);\n  } else {\n    return Math.round((1.055 * Math.pow(v, 1 / 2.4) - 0.055) * 255 + 0.5);\n  }\n};\n\nexport const sign = (n) => (n < 0 ? -1 : 1);\n\nexport const signPow = (val, exp) =>\n  sign(val) * Math.pow(Math.abs(val), exp);\n","export class ValidationError extends Error {\n  constructor(message) {\n    super(message);\n\n    this.name = \"ValidationError\";\n    this.message = message;\n  }\n}\n","if(window.CanvasPixelArray) {\n  CanvasPixelArray.prototype.set = function(arr) {\n    var l=this.length, i=0;\n\n    for(;i<l;i++) {\n      this[i] = arr[i];\n    }\n  };\n}\n(() => {\n  try {\n    new window.ImageData(new Uint8ClampedArray([0, 0, 0, 0]), 1, 1);\n  } catch (e) {\n    function ImageDataPolyfill () {\n      let args = [...arguments], data;\n\n      if (args.length < 2) {\n        throw new TypeError(`\n          Failed to construct 'ImageData': 2 arguments required, but only ${args.length} present.\n        `);\n      }\n\n      if (args.length > 2) {\n        data = args.shift();\n\n        if (!(data instanceof Uint8ClampedArray)) {\n          throw new TypeError(`\n            Failed to construct 'ImageData': parameter 1 is not of type 'Uint8ClampedArray'\n          `);\n        }\n\n        if (data.length !== 4 * args[0] * args[1]) {\n          throw new Error(`\n            Failed to construct 'ImageData': The input data byte length is not a multiple of (4 * width * height)\n          `);\n        }\n      }\n\n      const width = args[0],\n        height = args[1],\n        canvas = document.createElement('canvas'),\n        ctx = canvas.getContext('2d'),\n        imageData = ctx.createImageData(width, height);\n\n      if (data) imageData.data.set(data);\n      return imageData;\n    };\n\n    window.ImageData = ImageDataPolyfill;\n  }\n})();","/* eslint-disable no-undefined,no-param-reassign,no-shadow */\n\n/**\n * Throttle execution of a function. Especially useful for rate limiting\n * execution of handlers on events like resize and scroll.\n *\n * @param  {Number}    delay          A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.\n * @param  {Boolean}   [noTrailing]   Optional, defaults to false. If noTrailing is true, callback will only execute every `delay` milliseconds while the\n *                                    throttled-function is being called. If noTrailing is false or unspecified, callback will be executed one final time\n *                                    after the last throttled-function call. (After the throttled-function has not been called for `delay` milliseconds,\n *                                    the internal counter is reset)\n * @param  {Function}  callback       A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,\n *                                    to `callback` when the throttled-function is executed.\n * @param  {Boolean}   [debounceMode] If `debounceMode` is true (at begin), schedule `clear` to execute after `delay` ms. If `debounceMode` is false (at end),\n *                                    schedule `callback` to execute after `delay` ms.\n *\n * @return {Function}  A new, throttled, function.\n */\nfunction throttle (delay, noTrailing, callback, debounceMode) {\n  /*\n   * After wrapper has stopped being called, this timeout ensures that\n   * `callback` is executed at the proper times in `throttle` and `end`\n   * debounce modes.\n   */\n  var timeoutID;\n  var cancelled = false; // Keep track of the last time `callback` was executed.\n\n  var lastExec = 0; // Function to clear existing timeout\n\n  function clearExistingTimeout() {\n    if (timeoutID) {\n      clearTimeout(timeoutID);\n    }\n  } // Function to cancel next exec\n\n\n  function cancel() {\n    clearExistingTimeout();\n    cancelled = true;\n  } // `noTrailing` defaults to falsy.\n\n\n  if (typeof noTrailing !== 'boolean') {\n    debounceMode = callback;\n    callback = noTrailing;\n    noTrailing = undefined;\n  }\n  /*\n   * The `wrapper` function encapsulates all of the throttling / debouncing\n   * functionality and when executed will limit the rate at which `callback`\n   * is executed.\n   */\n\n\n  function wrapper() {\n    var self = this;\n    var elapsed = Date.now() - lastExec;\n    var args = arguments;\n\n    if (cancelled) {\n      return;\n    } // Execute `callback` and update the `lastExec` timestamp.\n\n\n    function exec() {\n      lastExec = Date.now();\n      callback.apply(self, args);\n    }\n    /*\n     * If `debounceMode` is true (at begin) this is used to clear the flag\n     * to allow future `callback` executions.\n     */\n\n\n    function clear() {\n      timeoutID = undefined;\n    }\n\n    if (debounceMode && !timeoutID) {\n      /*\n       * Since `wrapper` is being called for the first time and\n       * `debounceMode` is true (at begin), execute `callback`.\n       */\n      exec();\n    }\n\n    clearExistingTimeout();\n\n    if (debounceMode === undefined && elapsed > delay) {\n      /*\n       * In throttle mode, if `delay` time has been exceeded, execute\n       * `callback`.\n       */\n      exec();\n    } else if (noTrailing !== true) {\n      /*\n       * In trailing throttle mode, since `delay` time has not been\n       * exceeded, schedule `callback` to execute `delay` ms after most\n       * recent execution.\n       *\n       * If `debounceMode` is true (at begin), schedule `clear` to execute\n       * after `delay` ms.\n       *\n       * If `debounceMode` is false (at end), schedule `callback` to\n       * execute after `delay` ms.\n       */\n      timeoutID = setTimeout(debounceMode ? clear : exec, debounceMode === undefined ? delay - elapsed : delay);\n    }\n  }\n\n  wrapper.cancel = cancel; // Return the wrapper function.\n\n  return wrapper;\n}\n\n/* eslint-disable no-undefined */\n/**\n * Debounce execution of a function. Debouncing, unlike throttling,\n * guarantees that a function is only executed a single time, either at the\n * very beginning of a series of calls, or at the very end.\n *\n * @param  {Number}   delay         A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.\n * @param  {Boolean}  [atBegin]     Optional, defaults to false. If atBegin is false or unspecified, callback will only be executed `delay` milliseconds\n *                                  after the last debounced-function call. If atBegin is true, callback will be executed only at the first debounced-function call.\n *                                  (After the throttled-function has not been called for `delay` milliseconds, the internal counter is reset).\n * @param  {Function} callback      A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,\n *                                  to `callback` when the debounced-function is executed.\n *\n * @return {Function} A new, debounced function.\n */\n\nfunction debounce (delay, atBegin, callback) {\n  return callback === undefined ? throttle(delay, atBegin, false) : throttle(delay, callback, atBegin !== false);\n}\n\nexport { throttle, debounce };\n"],"sourceRoot":""}