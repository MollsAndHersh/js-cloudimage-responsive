{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/blur-hash/index.js","webpack:///./src/blur-hash/ci.service.js","webpack:///./src/common/ci.utils.js","webpack:///./src/blur-hash/blurHash/index.js","webpack:///./src/blur-hash/blurHash/decode.js","webpack:///./src/blur-hash/blurHash/base83.js","webpack:///./src/blur-hash/blurHash/utils.js","webpack:///./src/blur-hash/blurHash/error.js","webpack:///./src/blur-hash/blurHash/imageDataPolyfill.js","webpack:///./node_modules/throttle-debounce/dist/index.esm.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_ci","window","CIResponsive","_blurHash","_throttleDebounce","config","_this","this","_classCallCheck","bgImageIndex","onImageLoad","_ref","wrapper","image","canvas","ratio","fill","style","background","paddingBottom","width","height","finishAnimation","applyOrUpdateBlurHashCanvas","blurHash","querySelector","document","createElement","pixels","decode","ctx","getContext","imageData","getImageData","data","set","putImageData","position","top","bottom","left","right","opacity","transition","prepend","processImageResponsive","props","params","isUpdate","imgSrc","parentContainerWidth","imageWidth","imageHeight","alignment","isLazy","isSVG","_getRatio","getRatio","_getRatio2","_slicedToArray","ratioBySize","isRatio","applyOrUpdateWrapper","cloudimageUrl","generateUrl","updateSizeWithPixelRatio","onload","setSrc","imageRatio","parseInt","getWrapper","wrap","initImageClasses","addClass","initImageStyles","display","padding","adaptiveSize","getRatioBySizeAdaptive","getRatioBySizeSimple","initImageBackgroundClasses","initImageBackgroundAttributes","setAttribute","initImageBackgroundStyles","processBackgroundImageResponsive","containerWidth","isImageSVG","tempImage","Image","src","setBackgroundSrc","getInitialConfigBlurHash","init","innerWidth","addEventListener","onLazyBeforeUnveil","process","debounce","onUpdateDimensions","event","_this2","bgContainer","target","bg","getAttribute","ciBlurHash","responsiveCss","optimizedImage","bgCanvas","removeAttribute","styleElem","appendChild","createTextNode","backgroundImage","_this3","images","filterImages","querySelectorAll","backgroundImages","length","forEach","processImage","head","processBackgroundImage","lazyLoading","isSavedWindowInnerWidthMoreThanCurrent","className","includes","_getImageInlineProps","getImageInlineProps","getParentWidth","_getImageProps","getImageProps","_getImageProps$params","undefined","isLazyCanceled","isRelativeUrlPath","checkIfRelativeUrlPath","getImgSrc","baseUrl","isOldBrowsers","processProps","isResponsiveAndLoaded","getContainerWidth","_getBackgroundImagePr","getBackgroundImageProps","_getBackgroundImagePr2","url","propertyName","dataSrcAttr","isBackground","parentNode","indexOf","placeholderBackground","overflow","setWrapperAlignment","nextSibling","insertBefore","extractBaseURLFromString","pathArray","arguments","split","relativeToAbsolutePath","base","relative","isRoot","stack","location","origin","baseURI","getBaseURL","parts","pop","shift","push","join","size","splittedSizes","toString","result","devicePixelRatio","toFixed","isInlineImageSizeParams","token","domain","doNotReplaceURL","configParams","getParams","getQueryString","w","h","restParams","_objectWithoutProperties","isCustom","customWidth","widthQ","heightQ","restParamsQ","keys","map","k","encodeURIComponent","getParentContainerWithWidth","img","getBoundingClientRect","leftPadding","getComputedStyle","paddingLeft","rightPadding","paddingRight","getContainerWithWidth","elem","computedStyles","getLowQualitySize","factor","Math","floor","normalizeSize","percent","parseFloat","innerHeight","getBreakPoint","concat","_toConsumableArray","reverse","find","item","matchMedia","media","matches","getSizeLimit","currentSize","exactSize","ceil","getCommonImageProps","sizes","getSize","attr","resultParams","temp","replace","matchedStr","substring","JSON","parse","e","decodeURI","resultSizes","element","attribute","isBlurHash","support","ImageData","Uint8ClampedArray","Element","_extends","removeClass","RegExp","protocol","baseURL","imageStyleWidth","parentElement","currentWidth","elementWidth","generateSources","adaptiveSizes","isPreview","sources","breakpointParams","mediaQuery","lowQualitySize","previewQualityFactor","srcSet","breakpoint","ratioSizeByBreakpoint","filtered","insertSource","source","getAdaptiveSize","presets","getInitialConfigLowPreview","_config$token","_config$domain","_config$lazyLoading","_config$imgLoadingAni","imgLoadingAnimation","_config$lazyLoadOffse","lazyLoadOffset","_config$width","_config$height","_config$placeholderBa","_config$ratio","_config$params","_config$init","_config$exactSize","_config$doNotReplaceU","xs","sm","md","lg","xl","_config$token3","_config$domain3","_config$lazyLoading3","_config$placeholderBa2","_config$ratio2","_config$params3","_config$init3","_config$exactSize3","_config$doNotReplaceU3","getInitialConfigPlain","_config$token2","_config$domain2","_config$lazyLoading2","_config$lazyLoadOffse2","_config$width2","_config$height2","_config$params2","_config$init2","_config$exactSize2","_config$doNotReplaceU2","createCSSSource","wrapWithPicture","nodeName","toLowerCase","setAnimation","transform","filter","setTimeout","removeProperty","margin","generateUrlByAdaptiveSize","slice","default","isBlurhashValid","_base","_utils","_error","validateBlurhash","blurhash","ValidationError","sizeFlag","decode83","numY","numX","decodeDC","error","errorReason","message","intR","intG","intB","sRGBToLinear","decodeAC","maximumValue","quantR","quantG","quantB","signPow","punch","colors","Array","bytesPerRow","y","x","g","b","j","basis","cos","PI","color","linearTosRGB","digitCharacters","str","encode83","digit","pow","v","max","min","round","sign","val","exp","abs","_possibleConstructorReturn","__proto__","getPrototypeOf","Error","CanvasPixelArray","arr","args","TypeError","createImageData","throttle","delay","noTrailing","callback","debounceMode","timeoutID","cancelled","lastExec","clearExistingTimeout","clearTimeout","self","elapsed","Date","now","exec","apply","cancel","atBegin","__webpack_exports__"],"mappings":"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","file":"js-cloudimage-responsive.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","//import 'core-js/features/typed-array/uint8-clamped-array';\n//import './prepend.polyfill';\nimport CIResponsive from './ci.service';\n\nwindow.CIResponsive = CIResponsive;","import {\n  addClass,\n  checkIfRelativeUrlPath,\n  filterImages,\n  generateUrl,\n  getBackgroundImageProps,\n  getContainerWidth,\n  getImageInlineProps,\n  getImageProps,\n  getImgSrc,\n  getInitialConfigBlurHash,\n  getParentWidth,\n  getRatioBySizeAdaptive,\n  getRatioBySizeSimple,\n  getWrapper,\n  isOldBrowsers,\n  isResponsiveAndLoaded,\n  updateSizeWithPixelRatio,\n  setWrapperAlignment,\n  isImageSVG\n} from '../common/ci.utils';\nimport { decode } from './blurHash';\nimport { debounce } from 'throttle-debounce';\n\n\nexport default class CIResponsive {\n  bgImageIndex = 0;\n\n  constructor(config) {\n    this.config = getInitialConfigBlurHash(config);\n\n    if (this.config.init) this.init();\n\n    this.innerWidth = window.innerWidth;\n  }\n\n  init() {\n    document.addEventListener('lazybeforeunveil', this.onLazyBeforeUnveil.bind(this));\n\n    this.process();\n\n    window.addEventListener('resize', debounce(100, this.onUpdateDimensions.bind(this)));\n  }\n\n  onUpdateDimensions() {\n    this.process(true);\n\n    if (this.innerWidth < window.innerWidth) {\n      this.innerWidth = window.innerWidth;\n    }\n  }\n\n  onLazyBeforeUnveil(event) {\n    const bgContainer = event.target;\n    const bg = bgContainer.getAttribute('data-bg');\n    const ciBlurHash = bgContainer.getAttribute('ci-blur-hash');\n    const responsiveCss = bgContainer.getAttribute('ci-responsive-css');\n\n    if (bg) {\n      let optimizedImage = new Image();\n\n      optimizedImage.onload = () => {\n        const bgCanvas = bgContainer.querySelector('canvas');\n\n        this.finishAnimation(bgContainer, true, ciBlurHash && bgCanvas);\n        bgContainer.removeAttribute('data-bg');\n        bgContainer.removeAttribute('ci-preview');\n\n        if (responsiveCss) {\n          this.styleElem.appendChild(document.createTextNode(responsiveCss));\n        }\n      }\n\n      optimizedImage.src = bg;\n\n      bgContainer.style.backgroundImage = 'url(' + bg + ')';\n    }\n  }\n\n  process(isUpdate) {\n    const images = filterImages(document.querySelectorAll('img[ci-src]'), 'ci-src');\n    const backgroundImages = filterImages(document.querySelectorAll('[ci-bg-url]'), 'ci-bg-url');\n\n    if (images.length > -1) {\n      images.forEach(image => { this.processImage(image, isUpdate); });\n    }\n\n    if (backgroundImages.length > -1) {\n      this.styleElem = document.createElement('style');\n\n      document.head.appendChild(this.styleElem);\n\n      backgroundImages.forEach(image => { this.processBackgroundImage(image, isUpdate); });\n    }\n  }\n\n  onImageLoad = ({ wrapper, image, canvas, ratio, fill }) => {\n    wrapper.style.background = 'transparent';\n\n    if (!ratio) {\n      wrapper.style.paddingBottom = ((fill || 100) / ((image.width / image.height) || 1)) + '%';\n    }\n\n    this.finishAnimation(image, false, canvas)\n  };\n\n  applyOrUpdateBlurHashCanvas = (wrapper, blurHash) => {\n    let canvas = wrapper.querySelector('canvas');\n\n    if (!canvas && blurHash) {\n      canvas = document.createElement(\"canvas\");\n\n      const pixels = decode(blurHash, 32, 32);\n      canvas.width = 32;\n      canvas.height = 32;\n      const ctx = canvas.getContext(\"2d\");\n      const imageData = ctx.getImageData(0, 0, 32, 32);\n      imageData.data.set(pixels);\n      ctx.putImageData(imageData, 0, 0);\n      canvas.style.width = '100%';\n      canvas.style.height = '100%';\n      canvas.style.position = 'absolute';\n      canvas.style.top = '0';\n      canvas.style.bottom = '0';\n      canvas.style.left = '0';\n      canvas.style.right = '0';\n      canvas.style.opacity = '1';\n\n      canvas.style.transition = 'opacity 0.3s ease-in-out';\n\n      wrapper.prepend(canvas);\n    }\n\n    return canvas;\n  }\n\n  processImageResponsive = (props) => {\n    const {\n      ratio, params, image, isUpdate, imgSrc, parentContainerWidth, imageWidth, imageHeight, blurHash, fill, alignment,\n      isLazy, isSVG\n    } = props;\n    const [ratioBySize, isRatio] = this.getRatio(ratio || this.config.ratio, params);\n    let wrapper = this.applyOrUpdateWrapper(\n      { isUpdate, image, isRatio, ratioBySize, ratio, imageWidth, imageHeight, fill, alignment }\n    );\n\n    const canvas = this.applyOrUpdateBlurHashCanvas(wrapper, blurHash);\n\n    const cloudimageUrl = generateUrl(\n      imgSrc,\n      params,\n      this.config,\n      updateSizeWithPixelRatio(parentContainerWidth),\n      imageHeight && imageWidth,\n      imageHeight\n    );\n\n    image.onload = () => { this.onImageLoad({ wrapper, image, canvas: blurHash && canvas, ratio, fill }) };\n    this.setSrc(image, cloudimageUrl, null , isLazy, isSVG, imgSrc);\n  }\n\n  processImage(image, isUpdate) {\n    let isLazy = this.config.lazyLoading;\n    const isSavedWindowInnerWidthMoreThanCurrent = this.innerWidth < window.innerWidth;\n\n    if (image.className.includes('ci-image-loaded') && !isSavedWindowInnerWidthMoreThanCurrent) return;\n\n    let { imageWidth, imageHeight, imageRatio } = getImageInlineProps(image);\n    let parentContainerWidth = getParentWidth(image, this.config, imageRatio && imageWidth);\n    let { params = {}, ratio, blurHash, src, fill, alignment, isLazyCanceled } = getImageProps(image);\n\n    if ((isLazyCanceled && isLazy) || isUpdate) {\n      isLazy = false;\n    }\n\n    if (fill !== 100) {\n      parentContainerWidth = parentContainerWidth * (isUpdate ? 1 : fill / 100);\n    }\n\n    if (!src) return;\n\n    const isRelativeUrlPath = checkIfRelativeUrlPath(src);\n    const imgSrc = getImgSrc(src, isRelativeUrlPath, this.config.baseUrl);\n    const isSVG = isImageSVG(imgSrc);\n\n    if (!isOldBrowsers(true)) {\n      image.src = imgSrc;\n\n      return;\n    }\n\n    if (!isUpdate) {\n      this.initImageClasses(image, isLazy);\n      this.initImageStyles(image);\n    }\n\n    const processProps = {\n      ratio, params, image, isUpdate, imgSrc, parentContainerWidth, imageWidth, imageHeight, isLazy, blurHash, fill,\n      alignment, isSVG\n    };\n\n    this.processImageResponsive(processProps);\n  }\n\n  applyOrUpdateWrapper = props => {\n    const { isUpdate, image, isRatio, ratioBySize, ratio, imageWidth, imageHeight, fill, alignment } = props;\n    let wrapper = null;\n    let imageRatio = imageWidth && imageHeight && (parseInt(imageWidth) / parseInt(imageHeight));\n\n    if (!isUpdate) {\n      wrapper = this.wrap(\n        image, null, isRatio, ratioBySize, ratio || this.config.ratio, imageRatio, imageWidth, imageHeight, fill,\n        alignment\n      );\n    } else {\n      wrapper = getWrapper(image);\n\n      if (isRatio && !imageRatio) {\n        wrapper.style.paddingBottom = ((fill || 100) / (ratioBySize || ratio || this.config.ratio)) + '%';\n      } else if (imageRatio) {\n        wrapper.style.height = imageHeight + 'px';\n      }\n    }\n\n    return wrapper;\n  }\n\n  initImageClasses = (image, isLazy) => {\n    addClass(image, 'ci-image');\n\n    if (isLazy) {\n      addClass(image, 'lazyload');\n    }\n  }\n\n  initImageStyles = image => {\n    image.style.display = 'block';\n    image.style.width = '100%';\n    image.style.padding = '0';\n    image.style.position = 'absolute';\n    image.style.top = '0';\n    image.style.left = '0';\n    image.style.height = 'auto';\n    image.style.opacity = '0';\n    image.style.transition = 'opacity 0.3s ease-in-out';\n  }\n\n  getRatio = (ratio, params, adaptiveSize) => {\n    const ratioBySize = adaptiveSize ?\n      getRatioBySizeAdaptive(params, adaptiveSize) :\n      getRatioBySizeSimple(params);\n\n    return [ratioBySize, !!(ratioBySize || ratio)];\n  }\n\n  initImageBackgroundClasses = (image, isLazy) => {\n    addClass(image, 'ci-bg');\n\n    if (isLazy) {\n      addClass(image, 'lazyload');\n    }\n  }\n\n  initImageBackgroundAttributes = (image) => {\n    image.setAttribute('ci-bg-index', this.bgImageIndex);\n  }\n\n  initImageBackgroundStyles = (image) => {\n    image.style.position = (!image.style.position || image.style.position === 'static') ?\n      'relative' : image.style.position;\n  }\n\n  processBackgroundImageResponsive = (props) => {\n    const { params, image, imgSrc, containerWidth, isLazy, blurHash } = props;\n    const isSVG = isImageSVG(imgSrc);\n\n    const canvas = this.applyOrUpdateBlurHashCanvas(image, blurHash);\n\n    const cloudimageUrl = generateUrl(imgSrc, params, this.config, updateSizeWithPixelRatio(containerWidth));\n\n    if (!isLazy) {\n      let tempImage = new Image();\n\n      tempImage.src = cloudimageUrl;\n\n      tempImage.onload = () => {\n        this.finishAnimation(image, true, blurHash && canvas);\n      };\n    }\n\n    this.setBackgroundSrc(image, cloudimageUrl, isLazy, isSVG, imgSrc);\n  }\n\n  processBackgroundImage(image, isUpdate) {\n    let isLazy = this.config.lazyLoading;\n    const isSavedWindowInnerWidthMoreThanCurrent = this.innerWidth < window.innerWidth;\n\n    if (isResponsiveAndLoaded(image) && !isSavedWindowInnerWidthMoreThanCurrent) return;\n\n    let containerWidth = getContainerWidth(image, this.config);\n    let { params = {}, ratio, blurHash, src, isLazyCanceled } = getBackgroundImageProps(image);\n\n    if ((isLazyCanceled && isLazy) || isUpdate) {\n      isLazy = false;\n    }\n\n    if (!src) return;\n\n    const isRelativeUrlPath = checkIfRelativeUrlPath(src);\n    const imgSrc = getImgSrc(src, isRelativeUrlPath, this.config.baseUrl);\n\n    if (!isOldBrowsers(true)) {\n      image.style.backgroundImage = 'url(' + imgSrc + ')';\n\n      return;\n    }\n\n    this.initImageBackgroundClasses(image, isLazy);\n    this.initImageBackgroundAttributes(image);\n    this.initImageBackgroundStyles(image);\n\n    const processProps = { ratio, params, image, imgSrc, isLazy, containerWidth, blurHash };\n\n    this.processBackgroundImageResponsive(processProps);\n\n    this.bgImageIndex += 1;\n  }\n\n  setSrc(image, url, propertyName, isLazy, isSVG, imgSrc) {\n    const { dataSrcAttr } = this.config;\n\n    image.setAttribute(\n      propertyName ? propertyName : (isLazy ? 'data-src' : dataSrcAttr ? dataSrcAttr : 'src'),\n      isSVG ? imgSrc : url\n    );\n  }\n\n  setBackgroundSrc(image, url, isLazy, isSVG, imgSrc) {\n    const { dataSrcAttr } = this.config;\n\n    if (isLazy) {\n      image.setAttribute((dataSrcAttr ? dataSrcAttr : 'data-bg'), isSVG ? imgSrc : url);\n    } else {\n      image.style.backgroundImage = `url('${isSVG ? imgSrc : url}')`\n    }\n  }\n\n  finishAnimation(image, isBackground, canvas) {\n    if (isBackground) {\n      if (canvas && canvas.style) canvas.style.opacity = '0';\n    } else {\n      if (canvas && canvas.style) canvas.style.opacity = '0';\n      if (image && image.style) image.style.opacity = '1';\n    }\n    addClass(image, 'ci-image-loaded');\n  }\n\n  wrap(image, wrapper, isRatio, ratioBySize, ratio, imageRatio, imageWidth, imageHeight, fill, alignment) {\n    if ((image.parentNode.className || '').indexOf('ci-image-wrapper') > -1 ||\n      (image.parentNode.parentNode.className || '').indexOf('ci-image-wrapper') > -1) {\n      wrapper = image.parentNode;\n\n      addClass(wrapper, 'ci-image-wrapper');\n      wrapper.style.background = this.config.placeholderBackground;\n      wrapper.style.display = 'block';\n      wrapper.style.width = imageRatio ? imageWidth + 'px' : '100%';\n      wrapper.style.overflow = 'hidden';\n      wrapper.style.position = 'relative';\n\n      if (imageRatio && imageHeight) {\n        wrapper.style.height = imageHeight + 'px';\n      }\n\n      setWrapperAlignment(wrapper, alignment);\n\n      if (fill !== 100 && !imageRatio) {\n        wrapper.style.width = `${fill}%`;\n      }\n\n      return;\n    }\n\n    wrapper = wrapper || document.createElement('div');\n\n    addClass(wrapper, 'ci-image-wrapper');\n    wrapper.style.background = this.config.placeholderBackground;\n    wrapper.style.display = 'block';\n    wrapper.style.width = imageRatio ? imageWidth + 'px' : '100%';\n    wrapper.style.overflow = 'hidden';\n    wrapper.style.position = 'relative';\n\n    if (imageRatio && imageHeight) {\n      wrapper.style.height = imageHeight + 'px';\n    }\n\n    if (isRatio && !imageRatio) {\n      wrapper.style.paddingBottom = ((fill || 100) / (ratioBySize || ratio || this.config.ratio)) + '%';\n    }\n\n    if (image.nextSibling) {\n      image.parentNode.insertBefore(wrapper, image.nextSibling);\n    } else {\n      image.parentNode.appendChild(wrapper);\n    }\n\n    setWrapperAlignment(wrapper, alignment);\n\n    if (fill !== 100 && !imageRatio) {\n      wrapper.style.width = `${fill}%`;\n    }\n\n    wrapper.appendChild(image);\n\n    return wrapper;\n  }\n}","const checkIfRelativeUrlPath = src => {\n  if (!src) return false;\n\n  if (src.indexOf('//') === 0) {\n    src = window.location.protocol + src;\n  }\n\n  return (src.indexOf('http://') !== 0 && src.indexOf('https://') !== 0 && src.indexOf('//') !== 0);\n};\n\nconst getImgSrc = (src, isRelativeUrlPath = false, baseURL = '') => {\n  if (src.indexOf('//') === 0) {\n    src = window.location.protocol + src;\n  }\n\n  if (isRelativeUrlPath) {\n    return relativeToAbsolutePath(baseURL, src);\n  }\n\n  return src;\n};\n\nconst getBaseURL = (isRoot, base) => {\n  if (isRoot) {\n    return (base ? extractBaseURLFromString(base) : window.location.origin) + '/';\n  } else {\n    return base ? base : document.baseURI;\n  }\n}\n\nconst extractBaseURLFromString = (path = '') => {\n  const pathArray = path.split( '/' );\n  const protocol = pathArray[0];\n  const host = pathArray[2];\n\n  return protocol + '//' + host;\n}\n\nconst relativeToAbsolutePath = (base, relative) => {\n  const isRoot = relative[0] === '/';\n  const resultBaseURL = getBaseURL(isRoot, base);\n  const stack = resultBaseURL.split(\"/\");\n  const parts = relative.split(\"/\");\n\n  stack.pop(); // remove current file name (or empty string)\n               // (omit if \"base\" is the current folder without trailing slash)\n  if (isRoot) {\n    parts.shift();\n  }\n\n  for (let i = 0; i < parts.length; i++) {\n    if (parts[i] === \".\")\n      continue;\n    if (parts[i] === \"..\")\n      stack.pop();\n    else\n      stack.push(parts[i]);\n  }\n\n  return stack.join(\"/\");\n}\n\n/*\n* possible size values: 200 | 200x400\n* */\nexport const updateSizeWithPixelRatio = (size) => {\n  const splittedSizes = size.toString().split('x');\n  const result = [];\n\n  [].forEach.call(splittedSizes, size => {\n    size ? result.push(size * (window.devicePixelRatio.toFixed(1) || 1)) : '';\n  });\n\n  return result.join('x');\n};\n\nconst generateUrl = (imgSrc, params = {}, config, parentContainerWidth, isInlineImageSizeParams, imageHeight) => {\n  const { token, domain, doNotReplaceURL } = config;\n  const configParams = getParams(config.params);\n  const cloudUrl = doNotReplaceURL ? '' : `https://${token}.${domain}/v7/`;\n\n  return [\n    cloudUrl,\n    imgSrc,\n    imgSrc.includes('?') ? '&' : '?',\n    getQueryString({ ...configParams, ...params }, configParams, parentContainerWidth, isInlineImageSizeParams, imageHeight)\n  ].join('');\n};\n\nconst getQueryString = (params = {}, configParams, parentContainerWidth, isInlineImageSizeParams, imageHeight) => {\n  const { w, h, width, height, ...restParams } = params;\n  const isCustom = w || width || h || height;\n  const customWidth = w || width ? updateSizeWithPixelRatio(w || width) : null;\n  const widthQ = isCustom ? customWidth : parentContainerWidth;\n  const heightQ = h || height || isInlineImageSizeParams ? updateSizeWithPixelRatio(h || height || imageHeight) : null;\n  const restParamsQ = Object.keys(restParams).map(function (k) {\n    return encodeURIComponent(k) + \"=\" + encodeURIComponent(restParams[k]);\n  }).join('&')\n\n  return [\n    widthQ ? `w=${widthQ}` : '',\n    heightQ ? ((widthQ ? '&' : '') + `h=${heightQ}`) : '',\n    restParamsQ ? '&' + restParamsQ : ''\n  ].join('');\n};\n\nconst getParentWidth = (img, config, imageWidth) => {\n  // check if image has style width\n  if (!imageWidth) {\n    const imageStyleWidth = img && img.style && img.style.width;\n\n    if (imageStyleWidth.indexOf('px') > -1) {\n      imageWidth = parseFloat(imageStyleWidth).toString();\n    }\n  }\n\n  if (imageWidth) return parseInt(imageWidth);\n\n  if (!(img && img.parentElement && img.parentElement.getBoundingClientRect) && !(img && img.width))\n    return config.width;\n\n  const parentContainerWidth = getParentContainerWithWidth(img);\n  const currentWidth = parseInt(parentContainerWidth, 10);\n\n  if (!currentWidth) return img.width || config.width;\n\n  return getSizeLimit(currentWidth, config.exactSize);\n};\n\nconst getContainerWidth = (elem, config) => {\n  if (!(elem && elem.getBoundingClientRect))\n    return config.width;\n\n  const elementWidth = getContainerWithWidth(elem);\n  const currentWidth = parseInt(elementWidth, 10);\n\n  if (!currentWidth) return elem.width || config.width;\n\n  return getSizeLimit(currentWidth, config.exactSize);\n};\n\nconst getParentContainerWithWidth = img => {\n  let parentNode = null;\n  let width = 0;\n\n  do {\n    parentNode = (parentNode && parentNode.parentNode) || img.parentNode;\n    width = parentNode.getBoundingClientRect().width;\n  } while (parentNode && !width)\n\n  const leftPadding = width && parentNode && parseInt(window.getComputedStyle(parentNode).paddingLeft);\n  const rightPadding = parseInt(window.getComputedStyle(parentNode).paddingRight)\n\n  return width + (width ? (-leftPadding - rightPadding) : 0);\n};\n\nconst getContainerWithWidth = elem => {\n  const computedStyles = window.getComputedStyle(elem);\n  const width = elem.getBoundingClientRect().width;\n  const leftPadding = parseInt(computedStyles.paddingLeft);\n  const rightPadding = parseInt(computedStyles.paddingRight);\n\n  return width + (width ? (-leftPadding - rightPadding) : 0);\n};\n\nconst generateSources = (imgSrc, params, adaptiveSizes, config, parentContainerWidth, isPreview) => {\n  const sources = [];\n\n  adaptiveSizes.forEach(({ params: breakpointParams, media: mediaQuery }) => {\n    let lowQualitySize = null;\n    let containerWidth = parentContainerWidth;\n\n    if (isPreview) {\n      lowQualitySize = getLowQualitySize({ ...params, ...breakpointParams }, config.previewQualityFactor);\n      containerWidth = parentContainerWidth / config.previewQualityFactor;\n    }\n\n    sources.push({\n      mediaQuery,\n      srcSet: generateUrl(\n        imgSrc, { ...params, ...breakpointParams, ...lowQualitySize }, config, updateSizeWithPixelRatio(containerWidth)\n      )\n    });\n  });\n\n  return sources;\n};\n\nconst generateUrlByAdaptiveSize = (imgSrc, params, size, config, parentContainerWidth, isPreview) => {\n  const { params: breakpointParams } = size;\n\n  let lowQualitySize = null;\n  let containerWidth = parentContainerWidth;\n\n  if (isPreview) {\n    lowQualitySize = getLowQualitySize({ ...params, ...breakpointParams }, config.previewQualityFactor);\n    containerWidth = parentContainerWidth / config.previewQualityFactor;\n  }\n\n  return generateUrl(\n    imgSrc, { ...params, ...breakpointParams, ...lowQualitySize }, config, updateSizeWithPixelRatio(containerWidth)\n  );\n}\n\nconst getLowQualitySize = (params = {}, factor) => {\n  let { width, height } = params;\n\n  width = width ? Math.floor(width / factor) : null;\n  height = height ? Math.floor(height / factor) : null;\n\n  return { width, w: width, height, h: height };\n};\n\nconst getAdaptiveSize = (sizes, config) => {\n  const resultSizes = [];\n\n  Object.keys(sizes).forEach(key => {\n    const isCustomMedia = key.indexOf(':') > -1;\n    const media = isCustomMedia ? key : config.presets[key];\n\n    resultSizes.push({ media, params: normalizeSize(sizes[key]) });\n  });\n\n  return resultSizes;\n};\n\nconst normalizeSize = (params = {}) => {\n  let { w, h } = params;\n\n  if ((w.toString()).indexOf('vw') > -1) {\n    const percent = parseFloat(w);\n\n    w = window.innerWidth * percent / 100;\n  } else {\n    w = parseFloat(w);\n  }\n\n  if ((h.toString()).indexOf('vh') > -1) {\n    const percent = parseFloat(h);\n\n    h = window.innerHeight * percent / 100;\n  } else {\n    h = parseFloat(h);\n  }\n\n  return { w, h };\n}\n\nconst getRatioBySizeSimple = (params = {}) => {\n  let { width, w, height, h } = params;\n\n  if ((width || w) && (height || h))\n    return (width || w) / (height || h);\n\n  return null;\n}\n\nconst getRatioBySizeAdaptive = (params = {}, adaptiveSize) => {\n  const breakpoint = getBreakPoint(adaptiveSize) || adaptiveSize[0];\n  const ratioSizeByBreakpoint = getRatioBySizeSimple(breakpoint.params);\n\n  if (!ratioSizeByBreakpoint) {\n    return getRatioBySizeSimple(params);\n  } else {\n    return ratioSizeByBreakpoint;\n  }\n}\n\nconst getBreakPoint = (size) => [...size].reverse().find(item => window.matchMedia(item.media).matches);\n\nconst getSizeLimit = (currentSize, exactSize) => {\n  if (currentSize <= 25) return '25';\n  if (currentSize <= 50) return '50';\n  if (exactSize) return currentSize.toString();\n\n  return (Math.ceil(currentSize / 100) * 100).toString();\n};\n\nconst filterImages = (images) => {\n  const filtered = [];\n\n  for (let i = 0; i < images.length; i++) {\n    const image = images[i];\n    const isProcessed = image.className.includes('ci-image-loaded');\n\n    if (!isProcessed) {\n      filtered.push(image);\n    }\n  }\n\n  return filtered;\n};\n\nconst getCommonImageProps = (image) => ({\n  sizes: getSize(attr(image, 'ci-sizes') || attr(image, 'data-ci-size') || {}) || undefined,\n  params: getParams(attr(image, 'ci-params') || attr(image, 'data-ci-params') || {}),\n  ratio: attr(image, 'ci-ratio') || attr(image, 'data-ci-ratio') || undefined,\n  blurHash: attr(image, 'ci-blur-hash') || attr(image, 'data-ci-blur-hash') || undefined,\n  isLazyCanceled: (attr(image, 'ci-not-lazy') !== null || attr(image, 'data-ci-not-lazy') !== null) || undefined\n});\n\nconst getParams = (params) => {\n  let resultParams = undefined;\n\n  try {\n    let temp = params.replace(/(\\w+:)|(\\w+ :)/g, function (matchedStr) {\n      return '\"' + matchedStr.substring(0, matchedStr.length - 1) + '\":';\n    });\n\n    resultParams = JSON.parse(temp);\n  } catch (e) {}\n\n  if (!resultParams) {\n    try {\n      resultParams = JSON.parse('{\"' + decodeURI(params.replace(/&/g, \"\\\",\\\"\").replace(/=/g, \"\\\":\\\"\")) + '\"}');\n    } catch (e) {}\n  }\n\n  return resultParams;\n}\n\nconst getSize = (sizes) => {\n  let resultSizes = null;\n\n  try {\n    // add quotes around params\n    let temp = sizes.replace(/(\\w+:)|(\\w+ :)/g, function (matchedStr) {\n      return '\"' + matchedStr.substring(0, matchedStr.length - 1) + '\":';\n    });\n    // change single quotes to double quotes\n    temp = temp.replace(/'/g, '\"').replace(/-\"width\":/g, '-width:');\n    resultSizes = JSON.parse(temp);\n  } catch (e) {}\n\n  if (resultSizes) {\n    Object.keys(resultSizes).forEach(key => {\n      if (typeof resultSizes[key] === 'string') {\n        try {\n          resultSizes[key] = JSON.parse('{\"' + decodeURI(resultSizes[key].replace(/&/g, \"\\\",\\\"\").replace(/=/g, \"\\\":\\\"\")) + '\"}');\n        } catch (e) {}\n      }\n    });\n  }\n\n  return resultSizes;\n}\n\nconst getImageProps = (image) => ({\n  ...getCommonImageProps(image),\n  fill: parseFloat(attr(image, 'ci-fill') || attr(image, 'data-ci-fill') || 0) || 100,\n  alignment: attr(image, 'ci-align') || attr(image, 'data-ci-align') || 'auto',\n  src: attr(image, 'ci-src') || attr(image, 'data-ci-src') || undefined\n});\n\nconst getBackgroundImageProps = (image) => ({\n  ...getCommonImageProps(image),\n  src: attr(image, 'ci-bg-url') || attr(image, 'data-ci-bg-url') || undefined\n});\n\nconst attr = (element, attribute) => element.getAttribute(attribute);\n\nexport const isResponsiveAndLoaded = image => (\n  !(attr(image, 'ci-sizes') || attr(image, 'data-ci-sizes')) && image.className.includes('ci-image-loaded')\n);\n\nexport const isOldBrowsers = (isBlurHash) => {\n  let support = true;\n\n  if (isBlurHash) {\n    try {\n      new window.ImageData(new Uint8ClampedArray([0, 0, 0, 0]), 1, 1);\n    } catch (e) {\n      support = false\n    }\n  }\n\n  return Element.prototype.hasOwnProperty('prepend') && support;\n};\n\nexport const getImageInlineProps = (image) => {\n  let props = {\n    imageWidth: image.getAttribute('width'),\n    imageHeight: image.getAttribute('height')\n  };\n\n  return {\n    ...props,\n    imageRatio: props.imageWidth && props.imageHeight && (parseInt(props.imageWidth) / parseInt(props.imageHeight))\n  }\n};\n\nconst insertSource = (element, source) => {\n  element.parentNode.insertBefore(source, element);\n};\n\n//const addClass = (elem, className) => {\n//  if (!elem.className.indexOf(className) > -1) {\n//    elem.className += ' ' + className;\n//  }\n//};\n\nconst addClass = (elem, className) => {\n  if (!(elem.className.indexOf(className) > -1)) {\n    elem.className += ' ' + className;\n  }\n};\n\nconst removeClass = (elem, className) => {\n  if (elem.className.indexOf(className) > -1) {\n    elem.className = elem.className.replace(new RegExp('\\\\b' + className + '\\\\b', 'g'), '');\n  }\n};\n\nconst getInitialConfigLowPreview = (config) => {\n  const {\n    token = '',\n    domain = 'cloudimg.io',\n    lazyLoading = false,\n    imgLoadingAnimation = true,\n    lazyLoadOffset = 100,\n    width = '400',\n    height = '300',\n    placeholderBackground = '#f4f4f4',\n    baseUrl, // to support old name\n    baseURL,\n    ratio = 1.5,\n    presets,\n    params = 'org_if_sml=1',\n    init = true,\n    exactSize = false,\n    doNotReplaceURL = false\n  } = config;\n\n  return {\n    token,\n    domain,\n    lazyLoading,\n    imgLoadingAnimation,\n    lazyLoadOffset,\n    width,\n    height,\n    placeholderBackground,\n    baseUrl: baseUrl || baseURL,\n    ratio,\n    exactSize,\n    presets: presets ? presets :\n      {\n        xs: '(max-width: 575px)',  // to 575       PHONE\n        sm: '(min-width: 576px)',  // 576 - 767    PHABLET\n        md: '(min-width: 768px)',  // 768 - 991    TABLET\n        lg: '(min-width: 992px)',  // 992 - 1199   SMALL_LAPTOP_SCREEN\n        xl: '(min-width: 1200px)'  // from 1200    USUALSCREEN\n      },\n    params,\n    innerWidth: window.innerWidth,\n    init,\n    previewQualityFactor: 10,\n    doNotReplaceURL\n    //isChrome: /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor)\n  };\n};\n\nconst getInitialConfigPlain = (config) => {\n  const {\n    token = '',\n    domain = 'cloudimg.io',\n    lazyLoading = false,\n    lazyLoadOffset = 100,\n    width = '400',\n    height = '300',\n    baseUrl, // to support old name\n    baseURL,\n    presets,\n    params = 'org_if_sml=1',\n    init = true,\n    exactSize = false,\n    doNotReplaceURL = false\n  } = config;\n\n  return {\n    token,\n    domain,\n    lazyLoading,\n    lazyLoadOffset,\n    width,\n    height,\n    baseUrl: baseUrl || baseURL,\n    exactSize,\n    presets: presets ? presets :\n      {\n        xs: '(max-width: 575px)',  // to 575       PHONE\n        sm: '(min-width: 576px)',  // 576 - 767    PHABLET\n        md: '(min-width: 768px)',  // 768 - 991    TABLET\n        lg: '(min-width: 992px)',  // 992 - 1199   SMALL_LAPTOP_SCREEN\n        xl: '(min-width: 1200px)'  // from 1200    USUALSCREEN\n      },\n    params,\n    innerWidth: window.innerWidth,\n    init,\n    doNotReplaceURL\n    //isChrome: /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor)\n  };\n};\n\nconst getInitialConfigBlurHash = (config) => {\n  const {\n    token = '',\n    domain = 'cloudimg.io',\n    lazyLoading = false,\n    placeholderBackground = '#f4f4f4',\n    baseUrl,\n    baseURL,\n    ratio = 1.5,\n    params = 'org_if_sml=1',\n    init = true,\n    exactSize = false,\n    doNotReplaceURL = false\n  } = config;\n\n  return {\n    token,\n    domain,\n    lazyLoading,\n    placeholderBackground,\n    baseUrl: baseUrl || baseURL,\n    ratio,\n    exactSize,\n    params,\n    innerWidth: window.innerWidth,\n    init,\n    previewQualityFactor: 10,\n    doNotReplaceURL\n  };\n};\n\nconst createCSSSource = (mediaQuery, srcSet, bgImageIndex) => {\n  if (mediaQuery) {\n    return `@media all and ${mediaQuery} { [ci-bg-index=\"${bgImageIndex}\"] { background-image: url('${srcSet}') !important; } }`\n  } else {\n    return `[ci-bg-index=\"${bgImageIndex}\"] { background-image: url('${srcSet}') !important; }`;\n  }\n};\n\nconst wrapWithPicture = (image, wrapper) => {\n  if ((image.parentNode.nodeName || '').toLowerCase() !== 'picture') {\n    wrapper = wrapper || document.createElement('picture');\n\n    if (image.nextSibling) {\n      image.parentNode.insertBefore(wrapper, image.nextSibling);\n    } else {\n      image.parentNode.appendChild(wrapper);\n    }\n\n    wrapper.appendChild(image);\n  }\n};\n\nconst setAnimation = (image, parentContainerWidth, isBackground) => {\n  if (!isBackground) {\n    image.style.transform = 'scale3d(1.1, 1.1, 1)';\n    image.style.filter = `blur(${Math.floor(parentContainerWidth / 100)}px)`;\n\n    setTimeout(() => {\n      image.style.transition = 'all 0.3s ease-in-out';\n    })\n  } else {\n    image.style.overflow = 'hidden';\n    addClass(image, 'ci-bg-animation');\n  }\n};\n\nconst finishAnimation = (image, isBackground, canvas) => {\n  if (canvas) {\n    if (isBackground) {\n      canvas.style.opacity = '0';\n    } else {\n      canvas.style.opacity = '0';\n      image.style.opacity = '1';\n    }\n  } else if (!isBackground) {\n    image.style.filter = 'blur(0px)';\n    image.style.transform = 'translateZ(0) scale3d(1, 1, 1)';\n  } else {\n    removeClass(image, 'ci-bg-animation');\n\n    setTimeout(() => {\n      image.style.removeProperty('overflow');\n    }, 300)\n  }\n\n  addClass(image, 'ci-image-loaded');\n};\n\nconst getWrapper = (image) => {\n  if ((image.parentNode.className || '').indexOf('ci-image-wrapper') > -1) {\n    return image.parentNode;\n  } else if ((image.parentNode.parentNode.className || '').indexOf('ci-image-wrapper') > -1) {\n    return image.parentNode.parentNode;\n  }\n};\n\nconst setWrapperAlignment = (wrapper, alignment) => {\n  switch (alignment) {\n    case 'auto':\n      break;\n    case 'center':\n      wrapper.style.margin = 'auto';\n  }\n}\n\nconst isImageSVG = url => url.slice(-4).toLowerCase() === '.svg';\n\nexport {\n  checkIfRelativeUrlPath,\n  getImgSrc,\n  generateUrl,\n  getParentWidth,\n  getContainerWidth,\n  generateSources,\n  getRatioBySizeSimple,\n  getRatioBySizeAdaptive,\n  getBreakPoint,\n  filterImages,\n  getImageProps,\n  getBackgroundImageProps,\n  insertSource,\n  addClass,\n  removeClass,\n  getAdaptiveSize,\n  getLowQualitySize,\n  getInitialConfigLowPreview,\n  getInitialConfigBlurHash,\n  getInitialConfigPlain,\n  createCSSSource,\n  wrapWithPicture,\n  setAnimation,\n  finishAnimation,\n  getWrapper,\n  getParams,\n  setWrapperAlignment,\n  generateUrlByAdaptiveSize,\n  isImageSVG\n}","import './imageDataPolyfill';\n\nexport { default as decode, isBlurhashValid } from \"./decode\";","import { decode83 } from \"./base83\";\nimport { sRGBToLinear, signPow, linearTosRGB } from \"./utils\";\nimport { ValidationError } from \"./error\";\n\n/**\n * Returns an error message if invalid or undefined if valid\n * @param blurhash\n */\nconst validateBlurhash = (blurhash) => {\n  if (!blurhash || blurhash.length < 6) {\n    throw new ValidationError(\n      \"The blurhash string must be at least 6 characters\"\n    );\n  }\n\n  const sizeFlag = decode83(blurhash[0]);\n  const numY = Math.floor(sizeFlag / 9) + 1;\n  const numX = (sizeFlag % 9) + 1;\n\n  if (blurhash.length !== 4 + 2 * numX * numY) {\n    throw new ValidationError(\n      `blurhash length mismatch: length is ${\n        blurhash.length\n        } but it should be ${4 + 2 * numX * numY}`\n    );\n  }\n};\n\nexport const isBlurhashValid = (blurhash) => {\n  try {\n    validateBlurhash(blurhash);\n  } catch (error) {\n    return { result: false, errorReason: error.message };\n  }\n\n  return { result: true };\n};\n\nconst decodeDC = (value) => {\n  const intR = value >> 16;\n  const intG = (value >> 8) & 255;\n  const intB = value & 255;\n  return [sRGBToLinear(intR), sRGBToLinear(intG), sRGBToLinear(intB)];\n};\n\nconst decodeAC = (value, maximumValue) => {\n  const quantR = Math.floor(value / (19 * 19));\n  const quantG = Math.floor(value / 19) % 19;\n  const quantB = value % 19;\n\n  const rgb = [\n    signPow((quantR - 9) / 9, 2.0) * maximumValue,\n    signPow((quantG - 9) / 9, 2.0) * maximumValue,\n    signPow((quantB - 9) / 9, 2.0) * maximumValue\n  ];\n\n  return rgb;\n};\n\nconst decode = (blurhash, width, height, punch) => {\n  validateBlurhash(blurhash);\n\n  punch = punch | 1;\n\n  const sizeFlag = decode83(blurhash[0]);\n  const numY = Math.floor(sizeFlag / 9) + 1;\n  const numX = (sizeFlag % 9) + 1;\n\n  const quantisedMaximumValue = decode83(blurhash[1]);\n  const maximumValue = (quantisedMaximumValue + 1) / 166;\n\n  const colors = new Array(numX * numY);\n\n  for (let i = 0; i < colors.length; i++) {\n    if (i === 0) {\n      const value = decode83(blurhash.substring(2, 6));\n      colors[i] = decodeDC(value);\n    } else {\n      const value = decode83(blurhash.substring(4 + i * 2, 6 + i * 2));\n      colors[i] = decodeAC(value, maximumValue * punch);\n    }\n  }\n\n  const bytesPerRow = width * 4;\n  const pixels = new Uint8ClampedArray(bytesPerRow * height);\n\n  for (let y = 0; y < height; y++) {\n    for (let x = 0; x < width; x++) {\n      let r = 0;\n      let g = 0;\n      let b = 0;\n\n      for (let j = 0; j < numY; j++) {\n        for (let i = 0; i < numX; i++) {\n          const basis =\n            Math.cos((Math.PI * x * i) / width) *\n            Math.cos((Math.PI * y * j) / height);\n          let color = colors[i + j * numX];\n          r += color[0] * basis;\n          g += color[1] * basis;\n          b += color[2] * basis;\n        }\n      }\n\n      let intR = linearTosRGB(r);\n      let intG = linearTosRGB(g);\n      let intB = linearTosRGB(b);\n\n      pixels[4 * x + 0 + y * bytesPerRow] = intR;\n      pixels[4 * x + 1 + y * bytesPerRow] = intG;\n      pixels[4 * x + 2 + y * bytesPerRow] = intB;\n      pixels[4 * x + 3 + y * bytesPerRow] = 255; // alpha\n    }\n  }\n  return pixels;\n};\n\nexport default decode;\n","const digitCharacters = [\n  \"0\",\n  \"1\",\n  \"2\",\n  \"3\",\n  \"4\",\n  \"5\",\n  \"6\",\n  \"7\",\n  \"8\",\n  \"9\",\n  \"A\",\n  \"B\",\n  \"C\",\n  \"D\",\n  \"E\",\n  \"F\",\n  \"G\",\n  \"H\",\n  \"I\",\n  \"J\",\n  \"K\",\n  \"L\",\n  \"M\",\n  \"N\",\n  \"O\",\n  \"P\",\n  \"Q\",\n  \"R\",\n  \"S\",\n  \"T\",\n  \"U\",\n  \"V\",\n  \"W\",\n  \"X\",\n  \"Y\",\n  \"Z\",\n  \"a\",\n  \"b\",\n  \"c\",\n  \"d\",\n  \"e\",\n  \"f\",\n  \"g\",\n  \"h\",\n  \"i\",\n  \"j\",\n  \"k\",\n  \"l\",\n  \"m\",\n  \"n\",\n  \"o\",\n  \"p\",\n  \"q\",\n  \"r\",\n  \"s\",\n  \"t\",\n  \"u\",\n  \"v\",\n  \"w\",\n  \"x\",\n  \"y\",\n  \"z\",\n  \"#\",\n  \"$\",\n  \"%\",\n  \"*\",\n  \"+\",\n  \",\",\n  \"-\",\n  \".\",\n  \":\",\n  \";\",\n  \"=\",\n  \"?\",\n  \"@\",\n  \"[\",\n  \"]\",\n  \"^\",\n  \"_\",\n  \"{\",\n  \"|\",\n  \"}\",\n  \"~\"\n];\n\nexport const decode83 = (str) => {\n  let value = 0;\n  for (let i = 0; i < str.length; i++) {\n    const c = str[i];\n    const digit = digitCharacters.indexOf(c);\n    value = value * 83 + digit;\n  }\n  return value;\n};\n\nexport const encode83 = (n, length) => {\n  var result = \"\";\n  for (let i = 1; i <= length; i++) {\n    let digit = (Math.floor(n) / Math.pow(83, length - i)) % 83;\n    result += digitCharacters[Math.floor(digit)];\n  }\n  return result;\n};\n","export const sRGBToLinear = (value) => {\n  let v = value / 255;\n  if (v <= 0.04045) {\n    return v / 12.92;\n  } else {\n    return Math.pow((v + 0.055) / 1.055, 2.4);\n  }\n};\n\nexport const linearTosRGB = (value) => {\n  let v = Math.max(0, Math.min(1, value));\n  if (v <= 0.0031308) {\n    return Math.round(v * 12.92 * 255 + 0.5);\n  } else {\n    return Math.round((1.055 * Math.pow(v, 1 / 2.4) - 0.055) * 255 + 0.5);\n  }\n};\n\nexport const sign = (n) => (n < 0 ? -1 : 1);\n\nexport const signPow = (val, exp) =>\n  sign(val) * Math.pow(Math.abs(val), exp);\n","export class ValidationError extends Error {\n  constructor(message) {\n    super(message);\n\n    this.name = \"ValidationError\";\n    this.message = message;\n  }\n}\n","if(window.CanvasPixelArray) {\n  CanvasPixelArray.prototype.set = function(arr) {\n    var l=this.length, i=0;\n\n    for(;i<l;i++) {\n      this[i] = arr[i];\n    }\n  };\n}\n(() => {\n  try {\n    new window.ImageData(new Uint8ClampedArray([0, 0, 0, 0]), 1, 1);\n  } catch (e) {\n    function ImageDataPolyfill () {\n      let args = [...arguments], data;\n\n      if (args.length < 2) {\n        throw new TypeError(`\n          Failed to construct 'ImageData': 2 arguments required, but only ${args.length} present.\n        `);\n      }\n\n      if (args.length > 2) {\n        data = args.shift();\n\n        if (!(data instanceof Uint8ClampedArray)) {\n          throw new TypeError(`\n            Failed to construct 'ImageData': parameter 1 is not of type 'Uint8ClampedArray'\n          `);\n        }\n\n        if (data.length !== 4 * args[0] * args[1]) {\n          throw new Error(`\n            Failed to construct 'ImageData': The input data byte length is not a multiple of (4 * width * height)\n          `);\n        }\n      }\n\n      const width = args[0],\n        height = args[1],\n        canvas = document.createElement('canvas'),\n        ctx = canvas.getContext('2d'),\n        imageData = ctx.createImageData(width, height);\n\n      if (data) imageData.data.set(data);\n      return imageData;\n    };\n\n    window.ImageData = ImageDataPolyfill;\n  }\n})();","/* eslint-disable no-undefined,no-param-reassign,no-shadow */\n\n/**\n * Throttle execution of a function. Especially useful for rate limiting\n * execution of handlers on events like resize and scroll.\n *\n * @param  {Number}    delay          A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.\n * @param  {Boolean}   [noTrailing]   Optional, defaults to false. If noTrailing is true, callback will only execute every `delay` milliseconds while the\n *                                    throttled-function is being called. If noTrailing is false or unspecified, callback will be executed one final time\n *                                    after the last throttled-function call. (After the throttled-function has not been called for `delay` milliseconds,\n *                                    the internal counter is reset)\n * @param  {Function}  callback       A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,\n *                                    to `callback` when the throttled-function is executed.\n * @param  {Boolean}   [debounceMode] If `debounceMode` is true (at begin), schedule `clear` to execute after `delay` ms. If `debounceMode` is false (at end),\n *                                    schedule `callback` to execute after `delay` ms.\n *\n * @return {Function}  A new, throttled, function.\n */\nfunction throttle (delay, noTrailing, callback, debounceMode) {\n  /*\n   * After wrapper has stopped being called, this timeout ensures that\n   * `callback` is executed at the proper times in `throttle` and `end`\n   * debounce modes.\n   */\n  var timeoutID;\n  var cancelled = false; // Keep track of the last time `callback` was executed.\n\n  var lastExec = 0; // Function to clear existing timeout\n\n  function clearExistingTimeout() {\n    if (timeoutID) {\n      clearTimeout(timeoutID);\n    }\n  } // Function to cancel next exec\n\n\n  function cancel() {\n    clearExistingTimeout();\n    cancelled = true;\n  } // `noTrailing` defaults to falsy.\n\n\n  if (typeof noTrailing !== 'boolean') {\n    debounceMode = callback;\n    callback = noTrailing;\n    noTrailing = undefined;\n  }\n  /*\n   * The `wrapper` function encapsulates all of the throttling / debouncing\n   * functionality and when executed will limit the rate at which `callback`\n   * is executed.\n   */\n\n\n  function wrapper() {\n    var self = this;\n    var elapsed = Date.now() - lastExec;\n    var args = arguments;\n\n    if (cancelled) {\n      return;\n    } // Execute `callback` and update the `lastExec` timestamp.\n\n\n    function exec() {\n      lastExec = Date.now();\n      callback.apply(self, args);\n    }\n    /*\n     * If `debounceMode` is true (at begin) this is used to clear the flag\n     * to allow future `callback` executions.\n     */\n\n\n    function clear() {\n      timeoutID = undefined;\n    }\n\n    if (debounceMode && !timeoutID) {\n      /*\n       * Since `wrapper` is being called for the first time and\n       * `debounceMode` is true (at begin), execute `callback`.\n       */\n      exec();\n    }\n\n    clearExistingTimeout();\n\n    if (debounceMode === undefined && elapsed > delay) {\n      /*\n       * In throttle mode, if `delay` time has been exceeded, execute\n       * `callback`.\n       */\n      exec();\n    } else if (noTrailing !== true) {\n      /*\n       * In trailing throttle mode, since `delay` time has not been\n       * exceeded, schedule `callback` to execute `delay` ms after most\n       * recent execution.\n       *\n       * If `debounceMode` is true (at begin), schedule `clear` to execute\n       * after `delay` ms.\n       *\n       * If `debounceMode` is false (at end), schedule `callback` to\n       * execute after `delay` ms.\n       */\n      timeoutID = setTimeout(debounceMode ? clear : exec, debounceMode === undefined ? delay - elapsed : delay);\n    }\n  }\n\n  wrapper.cancel = cancel; // Return the wrapper function.\n\n  return wrapper;\n}\n\n/* eslint-disable no-undefined */\n/**\n * Debounce execution of a function. Debouncing, unlike throttling,\n * guarantees that a function is only executed a single time, either at the\n * very beginning of a series of calls, or at the very end.\n *\n * @param  {Number}   delay         A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.\n * @param  {Boolean}  [atBegin]     Optional, defaults to false. If atBegin is false or unspecified, callback will only be executed `delay` milliseconds\n *                                  after the last debounced-function call. If atBegin is true, callback will be executed only at the first debounced-function call.\n *                                  (After the throttled-function has not been called for `delay` milliseconds, the internal counter is reset).\n * @param  {Function} callback      A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,\n *                                  to `callback` when the debounced-function is executed.\n *\n * @return {Function} A new, debounced function.\n */\n\nfunction debounce (delay, atBegin, callback) {\n  return callback === undefined ? throttle(delay, atBegin, false) : throttle(delay, callback, atBegin !== false);\n}\n\nexport { throttle, debounce };\n"],"sourceRoot":""}