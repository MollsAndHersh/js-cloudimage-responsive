{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/common/ci.utils.js","webpack:///./src/blur-hash/index.js","webpack:///./src/blur-hash/ci.service.js","webpack:///./src/blur-hash/ci.utils.js","webpack:///./src/blur-hash/blurHash/index.js","webpack:///./src/blur-hash/blurHash/decode.js","webpack:///./src/blur-hash/blurHash/base83.js","webpack:///./src/blur-hash/blurHash/utils.js","webpack:///./src/blur-hash/blurHash/error.js","webpack:///./src/blur-hash/blurHash/imageDataPolyfill.js","webpack:///./node_modules/throttle-debounce/dist/index.esm.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","checkIfRelativeUrlPath","src","indexOf","window","location","protocol","extractBaseURLFromString","pathArray","arguments","length","undefined","split","relativeToAbsolutePath","base","relative","isRoot","stack","origin","document","baseURI","getBaseURL","parts","pop","shift","push","join","updateSizeWithPixelRatio","size","devicePixelRatio","splittedSizes","toString","result","forEach","Math","floor","toFixed","generateUrl","props","params","config","width","height","token","domain","doNotReplaceURL","includes","getQueryString","getPreviewSRC","_ref","previewQualityFactor","previewParams","ci_info","lowQualitySize","getLowQualitySize","_props$params","_getParamsExceptSizeR","getParamsExceptSizeRelated","_getParamsExceptSizeR2","_slicedToArray","restParams","_getParamsExceptSizeR3","widthFromParam","heightFromParam","widthQ","heightQ","restParamsQ","keys","map","encodeURIComponent","w","h","_objectWithoutProperties","factor","getAdaptiveSize","sizes","presets","resultSizes","media","normalizeSize","_params$w","_params$h","_params$r","percent","parseFloat","innerWidth","innerHeight","getSizeLimit","exactSize","limitFactor","ceil","getCommonImageProps","image","getSize","attr","getParams","imageNodeRatio","blurHash","isLazyCanceled","preserveSize","imageNodeWidth","imageNodeHeight","resultParams","temp","replace","matchedStr","substring","JSON","parse","e","decodeURI","getURLWithoutQueryParams","url","getParamsFromURL","queryIndex","slice","element","attribute","getAttribute","addClass","isOldBrowsers","isBlurHash","support","ImageData","Uint8ClampedArray","Element","elem","className","removeClass","RegExp","DEVICE_PIXEL_RATIO_LIST","isImageSVG","toLowerCase","getRatio","determineContainerProps","imgNode","getWidth","getHeight","ratio","_ref2","_props$imgNode","_props$exactSize","_props$imageNodeWidth","_props$params2","_props$config","crop","isCrop","func","sizeParamsWidth","paramsWidth","imageNodeWidthPX","convertToPX","imageContainerWidth","getImageContainerWidth","_props$imgNode2","_props$config2","_props$exactSize2","_props$imageNodeHeigh","_props$params3","sizeParamsHeight","paramsRatio","paramsHeight","imageNodeHeightPX","imageContainerHeight","getImageContainerHeight","img","imageStyleHeight","style","imageHeight","parseInt","getParentContainerSize","imageStyleWidth","imageWidth","type","parentNode","getBoundingClientRect","leftPadding","getComputedStyle","paddingLeft","rightPadding","paddingRight","isApplyLowQualityPreview","isAdaptive","isSVG","setSrc","propertyName","lazy","imgSrc","dataSrcAttr","setAttribute","setSrcset","urls","_ref3","dpr","setBackgroundSrc","resultLink","backgroundImage","getImgSrc","baseURL","isRelativeURLPath","getBreakPoint","concat","_toConsumableArray","reverse","find","item","matchMedia","matches","filterImages","images","filtered","getImageProps","alignment","imageNodeSRC","_extends","getBackgroundImageProps","getInitialConfigLowPreview","_config$token","_config$domain","_config$lazyLoading","lazyLoading","_config$imgLoadingAni","imgLoadingAnimation","_config$width","_config$height","_config$placeholderBa","placeholderBackground","baseUrl","_config$params","_config$init","init","_config$exactSize","_config$doNotReplaceU","_config$limitFactor","xs","sm","md","lg","xl","devicePixelRatioList","getInitialConfigBlurHash","_config$token3","_config$domain3","_config$lazyLoading3","_config$placeholderBa2","_config$params3","_config$init3","_config$exactSize3","_config$doNotReplaceU3","_config$limitFactor3","getInitialConfigPlain","_config$token2","_config$domain2","_config$lazyLoading2","_config$width2","_config$height2","_config$params2","_config$init2","_config$exactSize2","_config$doNotReplaceU2","_config$limitFactor2","finishAnimation","isBackground","canvas","opacity","setTimeout","removeProperty","filter","transform","getWrapper","setWrapperAlignment","wrapper","margin","isLazy","isUpdate","_ci","CIResponsive","_ci2","_throttleDebounce","_classCallCheck","this","_initialiseProps","addEventListener","loadBackgroundImage","debounce","onUpdateDimensions","process","_this","backgroundImages","windowScreenBecomesBigger","querySelectorAll","getBasicInfo","containerProps","imgProps","cloudimageUrl","cloudimageSrcset","applyOrUpdateWrapper","initImageClasses","initImageStyles","applyOrUpdateBlurHashCanvas","onload","onImageLoad","initImageBackgroundClasses","initImageBackgroundStyles","tempImage","Image","isImage","_this2","_getImgSrc","_getImgSrc2","generateURLbyDPR","processImage","processBackgroundImage","_blurHash","wrapImage","event","bgContainer","target","bg","ciBlurHash","optimizedImage","bgCanvas","querySelector","removeAttribute","createElement","background","display","overflow","position","paddingBottom","nextSibling","insertBefore","appendChild","padding","top","left","transition","pixels","decode","ctx","getContext","imageData","getImageData","data","set","putImageData","bottom","right","zIndex","prepend","default","isBlurhashValid","_base","_utils","_error","validateBlurhash","blurhash","ValidationError","sizeFlag","decode83","numY","numX","decodeDC","error","errorReason","message","intR","intG","intB","sRGBToLinear","decodeAC","maximumValue","quantR","quantG","quantB","signPow","punch","colors","Array","bytesPerRow","y","x","g","b","j","basis","cos","PI","color","linearTosRGB","digitCharacters","str","encode83","digit","pow","v","max","min","round","sign","val","exp","abs","_possibleConstructorReturn","__proto__","getPrototypeOf","Error","CanvasPixelArray","arr","args","TypeError","createImageData","throttle","delay","noTrailing","callback","debounceMode","timeoutID","cancelled","lastExec","clearExistingTimeout","clearTimeout","self","elapsed","Date","now","exec","apply","cancel","atBegin","__webpack_exports__"],"mappings":"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","file":"js-cloudimage-responsive.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","const checkIfRelativeUrlPath = src => {\n  if (!src) return false;\n\n  if (src.indexOf('//') === 0) {\n    src = window.location.protocol + src;\n  }\n\n  return (src.indexOf('http://') !== 0 && src.indexOf('https://') !== 0 && src.indexOf('//') !== 0);\n};\n\nconst getImgSrc = (src, baseURL = '') => {\n  const isRelativeURLPath = checkIfRelativeUrlPath(src);\n\n  if (src.indexOf('//') === 0) {\n    src = window.location.protocol + src;\n  }\n\n  if (isRelativeURLPath) {\n    src = relativeToAbsolutePath(baseURL, src);\n  }\n\n  return [src, isImageSVG(src)];\n};\n\nconst getBaseURL = (isRoot, base) => {\n  if (isRoot) {\n    return (base ? extractBaseURLFromString(base) : window.location.origin) + '/';\n  } else {\n    return base ? base : document.baseURI;\n  }\n}\n\nconst extractBaseURLFromString = (path = '') => {\n  const pathArray = path.split('/');\n  const protocol = pathArray[0];\n  const host = pathArray[2];\n\n  return protocol + '//' + host;\n}\n\nconst relativeToAbsolutePath = (base, relative) => {\n  const isRoot = relative[0] === '/';\n  const resultBaseURL = getBaseURL(isRoot, base);\n  const stack = resultBaseURL.split(\"/\");\n  const parts = relative.split(\"/\");\n\n  stack.pop(); // remove current file name (or empty string)\n               // (omit if \"base\" is the current folder without trailing slash)\n  if (isRoot) {\n    parts.shift();\n  }\n\n  for (let i = 0; i < parts.length; i++) {\n    if (parts[i] === \".\")\n      continue;\n    if (parts[i] === \"..\")\n      stack.pop();\n    else\n      stack.push(parts[i]);\n  }\n\n  return stack.join(\"/\");\n}\n\n/*\n* possible size values: 200 | 200x400\n* */\nexport const updateSizeWithPixelRatio = (size, devicePixelRatio) => {\n  const splittedSizes = size.toString().split('x');\n  const result = [];\n\n  [].forEach.call(splittedSizes, size => {\n    size ? result.push(Math.floor(size * ((devicePixelRatio || window.devicePixelRatio).toFixed(1) || 1))) : '';\n  });\n\n  return result.join('x');\n};\n\nconst generateUrl = props => {\n  const { src, params, config, width, height, devicePixelRatio } = props;\n  const { token, domain, doNotReplaceURL } = config;\n\n  return [\n    doNotReplaceURL ? '' : `https://${token}.${domain}/v7/`,\n    src,\n    src.includes('?') ? '&' : '?',\n    getQueryString({ params: { ...config.params, ...params }, width, height, devicePixelRatio })\n  ].join('');\n};\n\nexport const getPreviewSRC = ({ config, width, height, params, src, devicePixelRatio }) => {\n  const { previewQualityFactor } = config;\n  const previewParams = { ...params, ci_info: '' };\n  const lowQualitySize = getLowQualitySize({ width, height }, previewQualityFactor);\n\n  return generateUrl({ src, config, params: { ...previewParams, ...lowQualitySize }, devicePixelRatio });\n};\n\nconst getQueryString = props => {\n  const {\n    params = {},\n    width,\n    height,\n    devicePixelRatio\n  } = props;\n  const [restParams, widthFromParam = null, heightFromParam] = getParamsExceptSizeRelated(params);\n  const widthQ = width ? updateSizeWithPixelRatio(width, devicePixelRatio) : widthFromParam;\n  const heightQ = height ? updateSizeWithPixelRatio(height, devicePixelRatio) : heightFromParam;\n  const restParamsQ = Object\n    .keys(restParams)\n    .map((key) => encodeURIComponent(key) + \"=\" + encodeURIComponent(restParams[key]))\n    .join('&');\n\n  return [\n    widthQ ? `w=${widthQ}` : '',\n    heightQ ? ((widthQ ? '&' : '') + `h=${heightQ}`) : '',\n    restParamsQ ? '&' + restParamsQ : ''\n  ].join('');\n};\n\nconst getParamsExceptSizeRelated = params => {\n  const { w, h, width, height, ...restParams } = params;\n\n  return [restParams, w || width, h || height];\n};\n\nconst getLowQualitySize = (params = {}, factor) => {\n  let { width, height } = params;\n\n  width = width ? Math.floor(width / factor) : null;\n  height = height ? Math.floor(height / factor) : null;\n\n  return { width, w: width, height, h: height };\n};\n\nconst getAdaptiveSize = (sizes, presets) => {\n  const resultSizes = [];\n\n  Object.keys(sizes).forEach(key => {\n    const isCustomMedia = key.indexOf(':') > -1;\n    const media = isCustomMedia ? key : presets[key];\n\n    resultSizes.push({ media, params: normalizeSize(sizes[key]) });\n  });\n\n  return resultSizes;\n};\n\nconst normalizeSize = (params = {}) => {\n  let { w = params.width || '', h = params.height || '', r = params.r } = params;\n\n  if ((w.toString()).indexOf('vw') > -1) {\n    const percent = parseFloat(w);\n\n    w = window.innerWidth * percent / 100;\n  } else {\n    w = parseFloat(w);\n  }\n\n  if ((h.toString()).indexOf('vh') > -1) {\n    const percent = parseFloat(h);\n\n    h = window.innerHeight * percent / 100;\n  } else {\n    h = parseFloat(h);\n  }\n\n  return { w, h, r };\n}\n\nconst getBreakPoint = (sizes, presets) => {\n  const size = getAdaptiveSize(sizes, presets);\n\n  return [...size].reverse().find(item => window.matchMedia(item.media).matches);\n}\n\nexport const getSizeLimit = (size, exactSize, limitFactor) => {\n  if (exactSize) return Math.ceil(size);\n  if (size <= 25) return 25;\n  if (size <= 50) return 50;\n\n  return Math.ceil(size / limitFactor) * limitFactor;\n};\n\nconst filterImages = (images, type) => {\n  const filtered = [];\n\n  for (let i = 0; i < images.length; i++) {\n    const image = images[i];\n    const isProcessed = image.className.includes(type);\n\n    if (!isProcessed) {\n      filtered.push(image);\n    }\n  }\n\n  return filtered;\n};\n\nconst getCommonImageProps = (image) => ({\n  sizes: getSize(attr(image, 'ci-sizes') || attr(image, 'data-ci-size') || {}) || undefined,\n  params: getParams(attr(image, 'ci-params') || attr(image, 'data-ci-params') || {}),\n  imageNodeRatio: attr(image, 'ci-ratio') || attr(image, 'data-ci-ratio') || undefined,\n  blurHash: attr(image, 'ci-blur-hash') || attr(image, 'data-ci-blur-hash') || undefined,\n  isLazyCanceled: (attr(image, 'ci-not-lazy') !== null || attr(image, 'data-ci-not-lazy') !== null) || undefined,\n  preserveSize: (attr(image, 'ci-preserve-size') !== null || attr(image, 'data-preserve-size') !== null) || undefined,\n  imageNodeWidth: attr(image, 'width'),\n  imageNodeHeight: attr(image, 'height')\n});\n\nconst getParams = (params) => {\n  let resultParams = undefined;\n\n  try {\n    let temp = params.replace(/(\\w+:)|(\\w+ :)/g, function (matchedStr) {\n      return '\"' + matchedStr.substring(0, matchedStr.length - 1) + '\":';\n    });\n\n    resultParams = JSON.parse(temp);\n  } catch (e) {}\n\n  if (!resultParams) {\n    try {\n      resultParams = JSON.parse('{\"' + decodeURI(params.replace(/&/g, \"\\\",\\\"\").replace(/=/g, \"\\\":\\\"\")) + '\"}');\n    } catch (e) {}\n  }\n\n  return resultParams;\n}\n\nconst getSize = (sizes) => {\n  let resultSizes = null;\n\n  try {\n    // add quotes around params\n    let temp = sizes.replace(/(\\w+:)|(\\w+ :)/g, function (matchedStr) {\n      return '\"' + matchedStr.substring(0, matchedStr.length - 1) + '\":';\n    });\n    // change single quotes to double quotes\n    temp = temp.replace(/'/g, '\"').replace(/-\"width\":/g, '-width:');\n    resultSizes = JSON.parse(temp);\n  } catch (e) {}\n\n  if (resultSizes) {\n    Object.keys(resultSizes).forEach(key => {\n      if (typeof resultSizes[key] === 'string') {\n        try {\n          resultSizes[key] = JSON.parse('{\"' + decodeURI(resultSizes[key].replace(/&/g, \"\\\",\\\"\").replace(/=/g, \"\\\":\\\"\")) + '\"}');\n        } catch (e) {}\n      }\n    });\n  }\n\n  return resultSizes;\n}\n\nconst getImageProps = (image) => {\n  const props = {\n    ...getCommonImageProps(image),\n    alignment: attr(image, 'ci-align') || attr(image, 'data-ci-align') || 'auto',\n    imageNodeSRC: attr(image, 'ci-src') || attr(image, 'data-ci-src') || undefined\n  };\n  const params = {\n    ...getParamsFromURL(props.imageNodeSRC),\n    ...props.params\n  };\n\n  return {\n    ...props,\n    params,\n    isAdaptive: !!props.sizes,\n    imageNodeSRC: getURLWithoutQueryParams(props.imageNodeSRC)\n  };\n};\n\nconst getBackgroundImageProps = (image) => {\n  const props = {\n    ...getCommonImageProps(image),\n    imageNodeSRC: attr(image, 'ci-bg-url') || attr(image, 'data-ci-bg-url') || undefined\n  };\n  const params = {\n    ...getParamsFromURL(props.imageNodeSRC),\n    ...props.params\n  };\n\n  return {\n    ...props,\n    params,\n    isAdaptive: !!props.sizes,\n    imageNodeSRC: getURLWithoutQueryParams(props.imageNodeSRC)\n  };\n};\n\nconst getURLWithoutQueryParams = url => url.split('?')[0];\n\nconst getParamsFromURL = (url) => {\n  const queryIndex = url.indexOf('?');\n\n  if (queryIndex === -1) return;\n\n  return getParams(url.slice(queryIndex + 1));\n};\n\nconst attr = (element, attribute) => element.getAttribute(attribute);\n\nexport const isOldBrowsers = (isBlurHash) => {\n  let support = true;\n\n  if (isBlurHash) {\n    try {\n      new window.ImageData(new Uint8ClampedArray([0, 0, 0, 0]), 1, 1);\n    } catch (e) {\n      support = false\n    }\n  }\n\n  return Element.prototype.hasOwnProperty('prepend') && support;\n};\n\nconst addClass = (elem, className) => {\n  if (!(elem.className.indexOf(className) > -1)) {\n    elem.className += ' ' + className;\n  }\n};\n\nconst removeClass = (elem, className) => {\n  if (elem.className.indexOf(className) > -1) {\n    elem.className = elem.className.replace(new RegExp('\\\\b' + className + '\\\\b', 'g'), '');\n  }\n};\n\nconst DEVICE_PIXEL_RATIO_LIST = [1, 1.5, 2, 3, 4];\n\nconst getInitialConfigLowPreview = (config) => {\n  const {\n    token = '',\n    domain = 'cloudimg.io',\n    lazyLoading = false,\n    imgLoadingAnimation = true,\n    width = '400',\n    height = '300',\n    placeholderBackground = '#f4f4f4',\n    baseUrl, // to support old name\n    baseURL,\n    ratio,\n    presets,\n    params = 'org_if_sml=1',\n    init = true,\n    exactSize = false,\n    doNotReplaceURL = false,\n    limitFactor = 100\n  } = config;\n\n  return {\n    token,\n    domain,\n    lazyLoading,\n    imgLoadingAnimation,\n    width,\n    height,\n    placeholderBackground,\n    baseURL: baseUrl || baseURL,\n    ratio,\n    exactSize,\n    presets: presets ? presets :\n      {\n        xs: '(max-width: 575px)',  // to 575       PHONE\n        sm: '(min-width: 576px)',  // 576 - 767    PHABLET\n        md: '(min-width: 768px)',  // 768 - 991    TABLET\n        lg: '(min-width: 992px)',  // 992 - 1199   SMALL_LAPTOP_SCREEN\n        xl: '(min-width: 1200px)'  // from 1200    USUALSCREEN\n      },\n    params: getParams(params),\n    innerWidth: window.innerWidth,\n    init,\n    previewQualityFactor: 10,\n    doNotReplaceURL,\n    devicePixelRatioList: DEVICE_PIXEL_RATIO_LIST,\n    limitFactor\n    //isChrome: /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor)\n  };\n};\n\nconst getInitialConfigPlain = (config) => {\n  const {\n    token = '',\n    domain = 'cloudimg.io',\n    lazyLoading = false,\n    width = '400',\n    height = '300',\n    baseUrl, // to support old name\n    baseURL,\n    presets,\n    params = 'org_if_sml=1',\n    init = true,\n    exactSize = false,\n    doNotReplaceURL = false,\n    limitFactor = 100\n  } = config;\n\n  return {\n    token,\n    domain,\n    lazyLoading,\n    width,\n    height,\n    baseURL: baseUrl || baseURL,\n    exactSize,\n    presets: presets ? presets :\n      {\n        xs: '(max-width: 575px)',  // to 575       PHONE\n        sm: '(min-width: 576px)',  // 576 - 767    PHABLET\n        md: '(min-width: 768px)',  // 768 - 991    TABLET\n        lg: '(min-width: 992px)',  // 992 - 1199   SMALL_LAPTOP_SCREEN\n        xl: '(min-width: 1200px)'  // from 1200    USUALSCREEN\n      },\n    params: getParams(params),\n    innerWidth: window.innerWidth,\n    init,\n    doNotReplaceURL,\n    devicePixelRatioList: DEVICE_PIXEL_RATIO_LIST,\n    limitFactor\n    //isChrome: /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor)\n  };\n};\n\nconst getInitialConfigBlurHash = (config) => {\n  const {\n    token = '',\n    domain = 'cloudimg.io',\n    lazyLoading = false,\n    placeholderBackground = '#f4f4f4',\n    baseUrl,\n    baseURL,\n    presets,\n    ratio,\n    params = 'org_if_sml=1',\n    init = true,\n    exactSize = false,\n    doNotReplaceURL = false,\n    limitFactor = 100\n  } = config;\n\n  return {\n    token,\n    domain,\n    lazyLoading,\n    placeholderBackground,\n    baseURL: baseUrl || baseURL,\n    ratio,\n    exactSize,\n    presets: presets ? presets :\n      {\n        xs: '(max-width: 575px)',  // to 575       PHONE\n        sm: '(min-width: 576px)',  // 576 - 767    PHABLET\n        md: '(min-width: 768px)',  // 768 - 991    TABLET\n        lg: '(min-width: 992px)',  // 992 - 1199   SMALL_LAPTOP_SCREEN\n        xl: '(min-width: 1200px)'  // from 1200    USUALSCREEN\n      },\n    params: getParams(params),\n    innerWidth: window.innerWidth,\n    init,\n    previewQualityFactor: 10,\n    doNotReplaceURL,\n    devicePixelRatioList: DEVICE_PIXEL_RATIO_LIST,\n    limitFactor\n  };\n};\n\nconst finishAnimation = (image, isBackground, canvas) => {\n  if (canvas) {\n    if (isBackground) {\n      canvas.style.opacity = '0';\n    } else {\n      canvas.style.opacity = '0';\n      image.style.opacity = '1';\n    }\n  } else if (!isBackground) {\n    image.style.filter = 'blur(0px)';\n    image.style.transform = 'translateZ(0) scale(1)';\n  } else {\n    removeClass(image, 'ci-bg-animation');\n\n    setTimeout(() => {\n      image.style.removeProperty('overflow');\n    }, 300)\n  }\n\n  addClass(image, 'ci-image-loaded');\n};\n\nconst getWrapper = (image) => {\n  if ((image.parentNode.className || '').indexOf('ci-image-wrapper') > -1) {\n    return image.parentNode;\n  } else if ((image.parentNode.parentNode.className || '').indexOf('ci-image-wrapper') > -1) {\n    return image.parentNode.parentNode;\n  }\n};\n\nconst setWrapperAlignment = (wrapper, alignment) => {\n  switch (alignment) {\n    case 'auto':\n      break;\n    case 'center':\n      wrapper.style.margin = 'auto';\n  }\n}\n\nconst isImageSVG = url => url.slice(-4).toLowerCase() === '.svg';\n\nexport const determineContainerProps = props => {\n  const { imgNode, config, imageNodeWidth, imageNodeHeight, imageNodeRatio, params, size } = props;\n  const { exactSize } = config;\n  let width = getWidth({ imgNode, config, exactSize, imageNodeWidth, params: { ...config.params, ...params }, size });\n  let height = getHeight({ imgNode, config, exactSize, imageNodeHeight, params: { ...config.params, ...params }, size, width });\n  let ratio = getRatio({ imageNodeRatio, width, height, size });\n\n  if (!height && width && ratio) {\n    height = Math.floor(width / ratio);\n  }\n\n  if (!width && height && ratio) {\n    width = Math.floor(height * ratio);\n  }\n\n  return { width, height, ratio };\n}\n\nexport const getRatio = ({ imageNodeRatio, width, height, size }) => {\n  if (size && size.params) {\n    if (size.params.r || size.params.ratio) {\n      return size.params.r || size.params.ratio;\n    } else if ((size.params.w || size.params.width) && (size.params.h || size.params.height)) {\n      return (size.params.w || size.params.width) / (size.params.h || size.params.height);\n    } else {\n      return null\n    }\n  }\n\n  if (imageNodeRatio) {\n    return imageNodeRatio;\n  } else if (width && height) {\n    return width / height;\n  }\n\n  return null;\n}\n\n/**\n * Get width for an image.\n *\n * Priority:\n * 1. image node param width\n * 2. image node image width\n * 3. image node inline styling\n * 4. parent node of image computed style width (up to body tag)\n *\n * @param {HTMLImageElement} props.imgNode - image node\n * @param {Boolean} props.exactSize - a flag to use exact width/height params\n * @param {Number} props.imageNodeWidth - width of image node\n * @param {String} props.params - params of image node\n * @return {Number} width limit\n */\nexport const getWidth = props => {\n  const {\n    imgNode = null,\n    exactSize = false,\n    imageNodeWidth = null,\n    params = {},\n    size,\n    config = {}\n  } = props;\n  const { limitFactor } = config;\n  const crop = isCrop(params.func || config.params.func);\n  const sizeParamsWidth = size && size.params && (size.params.w || size.params.width);\n  const paramsWidth = params.width || params.w;\n  const imageNodeWidthPX = imageNodeWidth && convertToPX(imageNodeWidth);\n  const imageContainerWidth = getImageContainerWidth(imgNode);\n  const result = crop ? imageContainerWidth : getSizeLimit(imageContainerWidth, exactSize, limitFactor);\n\n  if (size && size.params) {\n    if (size.params.r) {\n      if (params.width || params.w) {\n        return paramsWidth;\n      }\n\n      if (imageNodeWidth) {\n        return imageNodeWidthPX;\n      }\n\n      return result\n    }\n\n    return sizeParamsWidth;\n  }\n\n  if (paramsWidth) {\n    return paramsWidth;\n  }\n\n  if (imageNodeWidth) {\n    return imageNodeWidthPX;\n  }\n\n  return result;\n}\n\n/**\n * Get height for an image.\n *\n * Priority:\n * 1. image node param height\n * 2. image node image height\n * 3. image node inline styling\n * 4. parent node of image computed style height (up to body tag)\n *\n * @param {HTMLImageElement} props.imgNode - image node\n * @param {Object} props.config - plugin config\n * @param {Boolean} props.exactSize - a flag to use exact width/height params\n * @param {Number} props.imageNodeHeight - height of image node\n * @param {String} props.params - params of image node\n * @return {Number} height limit\n */\nexport const getHeight = props => {\n  const {\n    imgNode = null,\n    config = {},\n    exactSize = false,\n    imageNodeHeight = null,\n    params = {},\n    size,\n    width\n  } = props;\n  const { limitFactor } = config;\n  const crop = isCrop(params.func || config.params.func);\n  const sizeParamsHeight = size && size.params && (size.params.h || size.params.height);\n  const paramsRatio = size && size.params && (size.params.ratio || size.params.r);\n  const paramsHeight = params.height || params.h;\n  const imageNodeHeightPX = imageNodeHeight && convertToPX(imageNodeHeight);\n  const imageContainerHeight = getImageContainerHeight(imgNode);\n  const result = crop ? imageContainerHeight : getSizeLimit(imageContainerHeight, exactSize, limitFactor);\n\n  if (size && size.params) {\n    if (paramsRatio && width) {\n      return width / paramsRatio;\n    }\n\n    return sizeParamsHeight;\n  }\n\n  if (paramsHeight) {\n    return paramsHeight;\n  }\n\n  if (imageNodeHeight) {\n    return imageNodeHeightPX;\n  }\n\n  if (!crop) {\n    return null;\n  }\n\n  return result;\n};\n\n/**\n * Get container height for an image.\n *\n * Priority:\n * 1. inline styling\n * 2. parent node computed style width (up to body tag)\n *\n * @param {HTMLImageElement} img - image node\n * @return {Number} width of image container\n */\nexport const getImageContainerHeight = (img) => {\n  const imageStyleHeight = img && img.style && img.style.height && !img.style.height.includes('%');\n  const imageHeight = convertToPX(imageStyleHeight);\n\n  if (imageHeight) return parseInt(imageHeight, 10);\n\n  return parseInt(getParentContainerSize(img, 'height'), 10);\n}\n\n/**\n * Get container width for an image.\n *\n * Priority:\n * 1. inline styling\n * 2. parent node computed style width (up to body tag)\n *\n * @param {HTMLImageElement} img - image node\n * @return {Number} width of image container\n */\nexport const getImageContainerWidth = (img) => {\n  const imageStyleWidth = img && img.style && img.style.width && !img.style.width.includes('%');\n  const imageWidth = imageStyleWidth && convertToPX(imageStyleWidth);\n\n  if (imageWidth) return parseInt(imageWidth, 10);\n\n  return parseInt(getParentContainerSize(img), 10);\n}\n\nexport const convertToPX = (size = '') => {\n  size = size.toString();\n\n  if (size.indexOf('px') > -1) {\n    return parseInt(size);\n  } else if (size.indexOf('%') > -1) {\n    // todo calculate container width * %\n  } else if (size.indexOf('vw') > -1) {\n    return window.innerWidth * parseInt(size) / 100;\n  } else if (size.indexOf('vh') > -1) {\n    return window.innerHeight * parseInt(size) / 100;\n  }\n\n  return parseInt(size) || null;\n}\n\nconst getParentContainerSize = (img, type = 'width') => {\n  let parentNode = null;\n  let size = 0;\n\n  do {\n    parentNode = (parentNode && parentNode.parentNode) || img.parentNode;\n    size = parentNode.getBoundingClientRect()[type];\n  } while (parentNode && !size)\n\n  const leftPadding = size && parentNode && parseInt(window.getComputedStyle(parentNode).paddingLeft);\n  const rightPadding = parseInt(window.getComputedStyle(parentNode).paddingRight)\n\n  return size + (size ? (-leftPadding - rightPadding) : 0);\n};\n\nconst isLazy = (lazyLoading, isLazyCanceled, isUpdate) => {\n  if ((isLazyCanceled && lazyLoading) || isUpdate) {\n    lazyLoading = false;\n  }\n\n  return lazyLoading;\n};\n\nexport const isApplyLowQualityPreview = (isAdaptive, width, isSVG) => isAdaptive ? width > 400 : width > 400 && !isSVG;\n\nexport const setSrc = (image, url, propertyName, lazy, imgSrc, isSVG, dataSrcAttr) => {\n  image.setAttribute(\n    lazy ? (propertyName ? propertyName : 'data-src') : (dataSrcAttr ? dataSrcAttr : 'src'),\n    isSVG ? imgSrc : url\n  );\n};\n\nexport const setSrcset = (image, urls, propertyName, lazy, imgSrc, isSVG, dataSrcAttr) => {\n  if (isSVG) return;\n\n  image.setAttribute(\n    lazy ? (propertyName ? propertyName : 'data-srcset') : (dataSrcAttr ? dataSrcAttr : 'srcset'),\n    urls.map(({ dpr, url }) => `${url} ${dpr}x`).join(', ')\n  );\n};\n\nexport const setBackgroundSrc = (image, url, lazy, imgSrc, isSVG, dataSrcAttr) => {\n  const resultLink = isSVG ? imgSrc : url;\n\n  if (lazy) {\n    image.setAttribute((dataSrcAttr ? dataSrcAttr : 'data-bg'), resultLink);\n  } else {\n    image.style.backgroundImage = `url('${resultLink}')`\n  }\n};\n\nexport const isCrop = func => ['crop', 'fit', 'bound', 'cover'].includes(func);\n\nexport {\n  checkIfRelativeUrlPath,\n  getImgSrc,\n  generateUrl,\n  getBreakPoint,\n  filterImages,\n  getImageProps,\n  getBackgroundImageProps,\n  addClass,\n  removeClass,\n  getAdaptiveSize,\n  getLowQualitySize,\n  getInitialConfigLowPreview,\n  getInitialConfigBlurHash,\n  getInitialConfigPlain,\n  finishAnimation,\n  getWrapper,\n  getParams,\n  setWrapperAlignment,\n  isImageSVG,\n  isLazy\n}","//import 'core-js/features/typed-array/uint8-clamped-array';\n//import './prepend.polyfill';\nimport CIResponsive from './ci.service';\n\nwindow.CIResponsive = CIResponsive;","import {\n  determineContainerProps,\n  filterImages,\n  generateUrl,\n  getBackgroundImageProps,\n  getBreakPoint,\n  getImageProps,\n  getImgSrc,\n  getInitialConfigBlurHash,\n  isLazy,\n  isOldBrowsers,\n  setBackgroundSrc,\n  setSrc,\n  setSrcset\n} from '../common/ci.utils';\nimport {\n  applyOrUpdateBlurHashCanvas,\n  applyOrUpdateWrapper,\n  finishAnimation,\n  initImageBackgroundClasses,\n  initImageBackgroundStyles,\n  initImageClasses,\n  initImageStyles,\n  loadBackgroundImage,\n  onImageLoad\n} from './ci.utils';\nimport { debounce } from 'throttle-debounce';\n\n\nexport default class CIResponsive {\n  constructor(config) {\n    this.config = getInitialConfigBlurHash(config);\n\n    if (this.config.init) this.init();\n\n    this.innerWidth = window.innerWidth;\n  }\n\n  init() {\n    document.addEventListener('lazybeforeunveil', loadBackgroundImage);\n    window.addEventListener('resize', debounce(100, this.onUpdateDimensions.bind(this)));\n\n    this.process();\n  }\n\n  onUpdateDimensions() {\n    this.process(true);\n\n    if (this.innerWidth < window.innerWidth) {\n      this.innerWidth = window.innerWidth;\n    }\n  }\n\n  process(isUpdate) {\n    let images, backgroundImages;\n    const windowScreenBecomesBigger = this.innerWidth < window.innerWidth;\n\n    if (isUpdate) {\n      images = document.querySelectorAll('img[ci-src]');\n      backgroundImages = document.querySelectorAll('[ci-bg-url]');\n    } else {\n      images = filterImages(document.querySelectorAll('img[ci-src]'), 'ci-image');\n      backgroundImages = filterImages(document.querySelectorAll('[ci-bg-url]'), 'ci-bg');\n    }\n\n    if (images.length > -1) {\n      images.forEach(imgNode => {\n        this.getBasicInfo(imgNode, isUpdate, windowScreenBecomesBigger, 'image');\n      });\n    }\n\n    if (backgroundImages.length > -1) {\n      backgroundImages.forEach(imgNode => {\n        this.getBasicInfo(imgNode, isUpdate, windowScreenBecomesBigger, 'background');\n      });\n    }\n  }\n\n  getBasicInfo = (imgNode, isUpdate, windowScreenBecomesBigger, type) => {\n    const isImage = type === 'image';\n    const { config } = this;\n    const { baseURL, lazyLoading, presets, devicePixelRatioList } = config;\n    const imgProps = isImage ? getImageProps(imgNode) : getBackgroundImageProps(imgNode);\n    const { params, imageNodeSRC, blurHash, isLazyCanceled, sizes, isAdaptive, preserveSize } = imgProps;\n\n    if (!imageNodeSRC) return;\n\n    const [src, isSVG] = getImgSrc(imageNodeSRC, baseURL);\n    const lazy = isLazy(lazyLoading, isLazyCanceled, isUpdate);\n    let size;\n\n    if (!isOldBrowsers(true)) {\n      if (isImage) {\n        imgNode.src = src;\n      } else {\n        imgNode.style.backgroundImage = 'url(' + src + ')';\n      }\n\n      return;\n    }\n\n    if (isAdaptive) {\n      size = getBreakPoint(sizes, presets);\n    } else {\n      if (isUpdate && !windowScreenBecomesBigger) return;\n    }\n\n    const containerProps = determineContainerProps({ ...imgProps, imgNode, config, size });\n\n    const generateURLbyDPR = devicePixelRatio => generateUrl({ src, params, config, ...containerProps, devicePixelRatio })\n    const cloudimageUrl = generateURLbyDPR();\n    const cloudimageSrcset = devicePixelRatioList.map(dpr => ({ dpr: dpr.toString(), url: generateURLbyDPR(dpr) }));\n    const props = {\n      config,\n      isUpdate,\n      imgNode,\n      containerProps,\n      imgProps,\n      lazy,\n      blurHash,\n      cloudimageUrl,\n      isSVG,\n      src,\n      preserveSize,\n      isAdaptive\n    };\n\n    if (isImage) {\n      this.processImage({ ...props, cloudimageUrl: generateURLbyDPR(1), cloudimageSrcset });\n    } else {\n      this.processBackgroundImage(props);\n    }\n  }\n\n  processImage(props) {\n    const { config, isUpdate, imgNode, containerProps, imgProps, lazy, blurHash, cloudimageUrl, isSVG, src, preserveSize, cloudimageSrcset, isAdaptive } = props;\n    const { ratio } = containerProps;\n    const { placeholderBackground, dataSrcAttr } = config;\n    const wrapper = applyOrUpdateWrapper({ isUpdate, imgNode, ratio, placeholderBackground, ...imgProps });\n\n    if (!isUpdate) {\n      initImageClasses(imgNode, lazy);\n      initImageStyles(imgNode);\n\n      const canvas = applyOrUpdateBlurHashCanvas(wrapper, blurHash);\n\n      imgNode.onload = () => {\n        onImageLoad({ wrapper, imgNode, canvas: blurHash && canvas, ratio, preserveSize, isAdaptive })\n      };\n    }\n\n    setSrcset(imgNode, cloudimageSrcset, 'data-srcset', lazy, src, isSVG, dataSrcAttr);\n    setSrc(imgNode, cloudimageUrl, null, lazy, src, isSVG, dataSrcAttr);\n  }\n\n  processBackgroundImage(props) {\n    const { config, isUpdate, imgNode, lazy, blurHash, cloudimageUrl, isSVG, src } = props;\n    const { dataSrcAttr } = config;\n\n    if (!isUpdate) {\n      initImageBackgroundClasses(imgNode, lazy);\n      initImageBackgroundStyles(imgNode);\n\n      const canvas = applyOrUpdateBlurHashCanvas(imgNode, blurHash);\n\n      if (!lazy) {\n        let tempImage = new Image();\n\n        tempImage.src = cloudimageUrl;\n\n        tempImage.onload = () => {\n          finishAnimation(imgNode, blurHash && canvas);\n        };\n      }\n    }\n\n    setBackgroundSrc(imgNode, cloudimageUrl, lazy, src, isSVG, dataSrcAttr);\n  }\n}","import { addClass, getWrapper, setWrapperAlignment } from '../common/ci.utils'\nimport { decode } from './blurHash';\n\n\nexport const loadBackgroundImage = (event) => {\n  const bgContainer = event.target;\n  const bg = bgContainer.getAttribute('data-bg');\n  const ciBlurHash = bgContainer.getAttribute('ci-blur-hash');\n\n  if (bg) {\n    let optimizedImage = new Image();\n\n    optimizedImage.onload = () => {\n      const bgCanvas = bgContainer.querySelector('canvas');\n\n      finishAnimation(bgContainer, ciBlurHash && bgCanvas);\n      bgContainer.removeAttribute('data-bg');\n      bgContainer.removeAttribute('ci-preview');\n    }\n\n    optimizedImage.src = bg;\n\n    bgContainer.style.backgroundImage = 'url(' + bg + ')';\n  }\n};\n\nexport const applyOrUpdateWrapper = props => {\n  const { isUpdate, imgNode, ratio, imageNodeWidth, imageNodeHeight, alignment, preserveSize, placeholderBackground } = props;\n  let wrapper;\n\n  if (!isUpdate) {\n    wrapper = wrapImage({ imgNode, ratio, imageNodeWidth, imageNodeHeight, alignment, preserveSize, placeholderBackground });\n  } else {\n    wrapper = getWrapper(imgNode);\n\n    // TODO: remove in next release\n    // if (ratio) {\n    //   wrapper.style.paddingBottom = preserveSize ? 'none' : (100 / ratio) + '%';\n    // }\n  }\n\n  return wrapper;\n}\n\nexport const wrapImage = (props) => {\n  const { imgNode, ratio, imageNodeWidth, imageNodeHeight, alignment, preserveSize, placeholderBackground } = props;\n  let { wrapper } = props;\n\n  wrapper = wrapper || document.createElement('div');\n\n  addClass(wrapper, 'ci-image-wrapper');\n  wrapper.style.background = placeholderBackground;\n  wrapper.style.display = 'block';\n  wrapper.style.width = preserveSize ? imageNodeWidth : '100%';\n  wrapper.style.height = preserveSize ? imageNodeHeight : 'auto';\n  wrapper.style.overflow = 'hidden';\n  wrapper.style.position = 'relative';\n\n  if (ratio) {\n    wrapper.style.paddingBottom = preserveSize ? 'none' : (100 / ratio) + '%';\n  }\n\n  if (imgNode.nextSibling) {\n    imgNode.parentNode.insertBefore(wrapper, imgNode.nextSibling);\n  } else {\n    imgNode.parentNode.appendChild(wrapper);\n  }\n\n  setWrapperAlignment(wrapper, alignment);\n\n  wrapper.appendChild(imgNode);\n\n  return wrapper;\n};\n\nexport const finishAnimation = (image, canvas) => {\n  if (canvas && canvas.style) {\n    canvas.style.opacity = '0';\n  }\n\n  addClass(image, 'ci-image-loaded');\n};\n\nexport const initImageBackgroundClasses = (image, lazy) => {\n  addClass(image, 'ci-bg');\n\n  if (lazy) {\n    addClass(image, 'lazyload');\n  }\n};\n\nexport const initImageBackgroundStyles = (image) => {\n  image.style.position = (!image.style.position || image.style.position === 'static') ?\n    'relative' : image.style.position;\n};\n\nexport const initImageClasses = (imgNode, lazy) => {\n  addClass(imgNode, 'ci-image');\n\n  if (lazy) {\n    addClass(imgNode, 'lazyload');\n  }\n};\n\nexport const initImageStyles = imgNode => {\n  imgNode.style.display = 'block';\n  imgNode.style.width = '100%';\n  imgNode.style.padding = '0';\n  imgNode.style.position = 'absolute';\n  imgNode.style.top = '0';\n  imgNode.style.left = '0';\n  imgNode.style.height = 'auto';\n  imgNode.style.transition = 'opacity 400ms ease 0ms';\n};\n\nexport const applyOrUpdateBlurHashCanvas = (wrapper, blurHash) => {\n  let canvas = wrapper.querySelector('canvas');\n\n  if (!canvas && blurHash) {\n    canvas = document.createElement(\"canvas\");\n\n    const pixels = decode(blurHash, 32, 32);\n    canvas.width = 32;\n    canvas.height = 32;\n    const ctx = canvas.getContext(\"2d\");\n    const imageData = ctx.getImageData(0, 0, 32, 32);\n    imageData.data.set(pixels);\n    ctx.putImageData(imageData, 0, 0);\n    canvas.style.width = '100%';\n    canvas.style.height = '100%';\n    canvas.style.position = 'absolute';\n    canvas.style.top = '0';\n    canvas.style.bottom = '0';\n    canvas.style.left = '0';\n    canvas.style.right = '0';\n    canvas.style.opacity = '1';\n    canvas.style.zIndex = '1';\n    canvas.style.transition = 'opacity 400ms ease 0ms';\n\n    wrapper.prepend(canvas);\n  }\n\n  return canvas;\n};\n\nexport const onImageLoad = ({ wrapper, imgNode, canvas, preserveSize, ratio, isAdaptive }) => {\n  wrapper.style.background = 'transparent';\n\n  if (!ratio || isAdaptive) {\n    wrapper.style.paddingBottom = preserveSize ? 'none' : (100 / ((imgNode.width / imgNode.height) || 1)) + '%';\n  }\n\n  finishAnimation(imgNode, canvas)\n};","import './imageDataPolyfill';\n\nexport { default as decode, isBlurhashValid } from \"./decode\";","import { decode83 } from \"./base83\";\nimport { sRGBToLinear, signPow, linearTosRGB } from \"./utils\";\nimport { ValidationError } from \"./error\";\n\n/**\n * Returns an error message if invalid or undefined if valid\n * @param blurhash\n */\nconst validateBlurhash = (blurhash) => {\n  if (!blurhash || blurhash.length < 6) {\n    throw new ValidationError(\n      \"The blurhash string must be at least 6 characters\"\n    );\n  }\n\n  const sizeFlag = decode83(blurhash[0]);\n  const numY = Math.floor(sizeFlag / 9) + 1;\n  const numX = (sizeFlag % 9) + 1;\n\n  if (blurhash.length !== 4 + 2 * numX * numY) {\n    throw new ValidationError(\n      `blurhash length mismatch: length is ${\n        blurhash.length\n        } but it should be ${4 + 2 * numX * numY}`\n    );\n  }\n};\n\nexport const isBlurhashValid = (blurhash) => {\n  try {\n    validateBlurhash(blurhash);\n  } catch (error) {\n    return { result: false, errorReason: error.message };\n  }\n\n  return { result: true };\n};\n\nconst decodeDC = (value) => {\n  const intR = value >> 16;\n  const intG = (value >> 8) & 255;\n  const intB = value & 255;\n  return [sRGBToLinear(intR), sRGBToLinear(intG), sRGBToLinear(intB)];\n};\n\nconst decodeAC = (value, maximumValue) => {\n  const quantR = Math.floor(value / (19 * 19));\n  const quantG = Math.floor(value / 19) % 19;\n  const quantB = value % 19;\n\n  const rgb = [\n    signPow((quantR - 9) / 9, 2.0) * maximumValue,\n    signPow((quantG - 9) / 9, 2.0) * maximumValue,\n    signPow((quantB - 9) / 9, 2.0) * maximumValue\n  ];\n\n  return rgb;\n};\n\nconst decode = (blurhash, width, height, punch) => {\n  validateBlurhash(blurhash);\n\n  punch = punch | 1;\n\n  const sizeFlag = decode83(blurhash[0]);\n  const numY = Math.floor(sizeFlag / 9) + 1;\n  const numX = (sizeFlag % 9) + 1;\n\n  const quantisedMaximumValue = decode83(blurhash[1]);\n  const maximumValue = (quantisedMaximumValue + 1) / 166;\n\n  const colors = new Array(numX * numY);\n\n  for (let i = 0; i < colors.length; i++) {\n    if (i === 0) {\n      const value = decode83(blurhash.substring(2, 6));\n      colors[i] = decodeDC(value);\n    } else {\n      const value = decode83(blurhash.substring(4 + i * 2, 6 + i * 2));\n      colors[i] = decodeAC(value, maximumValue * punch);\n    }\n  }\n\n  const bytesPerRow = width * 4;\n  const pixels = new Uint8ClampedArray(bytesPerRow * height);\n\n  for (let y = 0; y < height; y++) {\n    for (let x = 0; x < width; x++) {\n      let r = 0;\n      let g = 0;\n      let b = 0;\n\n      for (let j = 0; j < numY; j++) {\n        for (let i = 0; i < numX; i++) {\n          const basis =\n            Math.cos((Math.PI * x * i) / width) *\n            Math.cos((Math.PI * y * j) / height);\n          let color = colors[i + j * numX];\n          r += color[0] * basis;\n          g += color[1] * basis;\n          b += color[2] * basis;\n        }\n      }\n\n      let intR = linearTosRGB(r);\n      let intG = linearTosRGB(g);\n      let intB = linearTosRGB(b);\n\n      pixels[4 * x + 0 + y * bytesPerRow] = intR;\n      pixels[4 * x + 1 + y * bytesPerRow] = intG;\n      pixels[4 * x + 2 + y * bytesPerRow] = intB;\n      pixels[4 * x + 3 + y * bytesPerRow] = 255; // alpha\n    }\n  }\n  return pixels;\n};\n\nexport default decode;\n","const digitCharacters = [\n  \"0\",\n  \"1\",\n  \"2\",\n  \"3\",\n  \"4\",\n  \"5\",\n  \"6\",\n  \"7\",\n  \"8\",\n  \"9\",\n  \"A\",\n  \"B\",\n  \"C\",\n  \"D\",\n  \"E\",\n  \"F\",\n  \"G\",\n  \"H\",\n  \"I\",\n  \"J\",\n  \"K\",\n  \"L\",\n  \"M\",\n  \"N\",\n  \"O\",\n  \"P\",\n  \"Q\",\n  \"R\",\n  \"S\",\n  \"T\",\n  \"U\",\n  \"V\",\n  \"W\",\n  \"X\",\n  \"Y\",\n  \"Z\",\n  \"a\",\n  \"b\",\n  \"c\",\n  \"d\",\n  \"e\",\n  \"f\",\n  \"g\",\n  \"h\",\n  \"i\",\n  \"j\",\n  \"k\",\n  \"l\",\n  \"m\",\n  \"n\",\n  \"o\",\n  \"p\",\n  \"q\",\n  \"r\",\n  \"s\",\n  \"t\",\n  \"u\",\n  \"v\",\n  \"w\",\n  \"x\",\n  \"y\",\n  \"z\",\n  \"#\",\n  \"$\",\n  \"%\",\n  \"*\",\n  \"+\",\n  \",\",\n  \"-\",\n  \".\",\n  \":\",\n  \";\",\n  \"=\",\n  \"?\",\n  \"@\",\n  \"[\",\n  \"]\",\n  \"^\",\n  \"_\",\n  \"{\",\n  \"|\",\n  \"}\",\n  \"~\"\n];\n\nexport const decode83 = (str) => {\n  let value = 0;\n  for (let i = 0; i < str.length; i++) {\n    const c = str[i];\n    const digit = digitCharacters.indexOf(c);\n    value = value * 83 + digit;\n  }\n  return value;\n};\n\nexport const encode83 = (n, length) => {\n  var result = \"\";\n  for (let i = 1; i <= length; i++) {\n    let digit = (Math.floor(n) / Math.pow(83, length - i)) % 83;\n    result += digitCharacters[Math.floor(digit)];\n  }\n  return result;\n};\n","export const sRGBToLinear = (value) => {\n  let v = value / 255;\n  if (v <= 0.04045) {\n    return v / 12.92;\n  } else {\n    return Math.pow((v + 0.055) / 1.055, 2.4);\n  }\n};\n\nexport const linearTosRGB = (value) => {\n  let v = Math.max(0, Math.min(1, value));\n  if (v <= 0.0031308) {\n    return Math.round(v * 12.92 * 255 + 0.5);\n  } else {\n    return Math.round((1.055 * Math.pow(v, 1 / 2.4) - 0.055) * 255 + 0.5);\n  }\n};\n\nexport const sign = (n) => (n < 0 ? -1 : 1);\n\nexport const signPow = (val, exp) =>\n  sign(val) * Math.pow(Math.abs(val), exp);\n","export class ValidationError extends Error {\n  constructor(message) {\n    super(message);\n\n    this.name = \"ValidationError\";\n    this.message = message;\n  }\n}\n","if(window.CanvasPixelArray) {\n  CanvasPixelArray.prototype.set = function(arr) {\n    var l=this.length, i=0;\n\n    for(;i<l;i++) {\n      this[i] = arr[i];\n    }\n  };\n}\n(() => {\n  try {\n    new window.ImageData(new Uint8ClampedArray([0, 0, 0, 0]), 1, 1);\n  } catch (e) {\n    function ImageDataPolyfill () {\n      let args = [...arguments], data;\n\n      if (args.length < 2) {\n        throw new TypeError(`\n          Failed to construct 'ImageData': 2 arguments required, but only ${args.length} present.\n        `);\n      }\n\n      if (args.length > 2) {\n        data = args.shift();\n\n        if (!(data instanceof Uint8ClampedArray)) {\n          throw new TypeError(`\n            Failed to construct 'ImageData': parameter 1 is not of type 'Uint8ClampedArray'\n          `);\n        }\n\n        if (data.length !== 4 * args[0] * args[1]) {\n          throw new Error(`\n            Failed to construct 'ImageData': The input data byte length is not a multiple of (4 * width * height)\n          `);\n        }\n      }\n\n      const width = args[0],\n        height = args[1],\n        canvas = document.createElement('canvas'),\n        ctx = canvas.getContext('2d'),\n        imageData = ctx.createImageData(width, height);\n\n      if (data) imageData.data.set(data);\n      return imageData;\n    };\n\n    window.ImageData = ImageDataPolyfill;\n  }\n})();","/* eslint-disable no-undefined,no-param-reassign,no-shadow */\n\n/**\n * Throttle execution of a function. Especially useful for rate limiting\n * execution of handlers on events like resize and scroll.\n *\n * @param  {Number}    delay          A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.\n * @param  {Boolean}   [noTrailing]   Optional, defaults to false. If noTrailing is true, callback will only execute every `delay` milliseconds while the\n *                                    throttled-function is being called. If noTrailing is false or unspecified, callback will be executed one final time\n *                                    after the last throttled-function call. (After the throttled-function has not been called for `delay` milliseconds,\n *                                    the internal counter is reset)\n * @param  {Function}  callback       A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,\n *                                    to `callback` when the throttled-function is executed.\n * @param  {Boolean}   [debounceMode] If `debounceMode` is true (at begin), schedule `clear` to execute after `delay` ms. If `debounceMode` is false (at end),\n *                                    schedule `callback` to execute after `delay` ms.\n *\n * @return {Function}  A new, throttled, function.\n */\nfunction throttle (delay, noTrailing, callback, debounceMode) {\n  /*\n   * After wrapper has stopped being called, this timeout ensures that\n   * `callback` is executed at the proper times in `throttle` and `end`\n   * debounce modes.\n   */\n  var timeoutID;\n  var cancelled = false; // Keep track of the last time `callback` was executed.\n\n  var lastExec = 0; // Function to clear existing timeout\n\n  function clearExistingTimeout() {\n    if (timeoutID) {\n      clearTimeout(timeoutID);\n    }\n  } // Function to cancel next exec\n\n\n  function cancel() {\n    clearExistingTimeout();\n    cancelled = true;\n  } // `noTrailing` defaults to falsy.\n\n\n  if (typeof noTrailing !== 'boolean') {\n    debounceMode = callback;\n    callback = noTrailing;\n    noTrailing = undefined;\n  }\n  /*\n   * The `wrapper` function encapsulates all of the throttling / debouncing\n   * functionality and when executed will limit the rate at which `callback`\n   * is executed.\n   */\n\n\n  function wrapper() {\n    var self = this;\n    var elapsed = Date.now() - lastExec;\n    var args = arguments;\n\n    if (cancelled) {\n      return;\n    } // Execute `callback` and update the `lastExec` timestamp.\n\n\n    function exec() {\n      lastExec = Date.now();\n      callback.apply(self, args);\n    }\n    /*\n     * If `debounceMode` is true (at begin) this is used to clear the flag\n     * to allow future `callback` executions.\n     */\n\n\n    function clear() {\n      timeoutID = undefined;\n    }\n\n    if (debounceMode && !timeoutID) {\n      /*\n       * Since `wrapper` is being called for the first time and\n       * `debounceMode` is true (at begin), execute `callback`.\n       */\n      exec();\n    }\n\n    clearExistingTimeout();\n\n    if (debounceMode === undefined && elapsed > delay) {\n      /*\n       * In throttle mode, if `delay` time has been exceeded, execute\n       * `callback`.\n       */\n      exec();\n    } else if (noTrailing !== true) {\n      /*\n       * In trailing throttle mode, since `delay` time has not been\n       * exceeded, schedule `callback` to execute `delay` ms after most\n       * recent execution.\n       *\n       * If `debounceMode` is true (at begin), schedule `clear` to execute\n       * after `delay` ms.\n       *\n       * If `debounceMode` is false (at end), schedule `callback` to\n       * execute after `delay` ms.\n       */\n      timeoutID = setTimeout(debounceMode ? clear : exec, debounceMode === undefined ? delay - elapsed : delay);\n    }\n  }\n\n  wrapper.cancel = cancel; // Return the wrapper function.\n\n  return wrapper;\n}\n\n/* eslint-disable no-undefined */\n/**\n * Debounce execution of a function. Debouncing, unlike throttling,\n * guarantees that a function is only executed a single time, either at the\n * very beginning of a series of calls, or at the very end.\n *\n * @param  {Number}   delay         A zero-or-greater delay in milliseconds. For event callbacks, values around 100 or 250 (or even higher) are most useful.\n * @param  {Boolean}  [atBegin]     Optional, defaults to false. If atBegin is false or unspecified, callback will only be executed `delay` milliseconds\n *                                  after the last debounced-function call. If atBegin is true, callback will be executed only at the first debounced-function call.\n *                                  (After the throttled-function has not been called for `delay` milliseconds, the internal counter is reset).\n * @param  {Function} callback      A function to be executed after delay milliseconds. The `this` context and all arguments are passed through, as-is,\n *                                  to `callback` when the debounced-function is executed.\n *\n * @return {Function} A new, debounced function.\n */\n\nfunction debounce (delay, atBegin, callback) {\n  return callback === undefined ? throttle(delay, atBegin, false) : throttle(delay, callback, atBegin !== false);\n}\n\nexport { throttle, debounce };\n"],"sourceRoot":""}